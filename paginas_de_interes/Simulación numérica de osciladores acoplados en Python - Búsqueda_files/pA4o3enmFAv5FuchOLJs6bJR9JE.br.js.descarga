var IframeContainer;(function(n){var f="vrhiframe",y=f+"_loaded",u="undefined",t=typeof pMMUtils!=u?pMMUtils:null,i=typeof VRHConsts!=u?VRHConsts:null,r=!1,e=null,o=null,s=null,h=null,c=null,l=null,a=[],v;if(!r&&t&&t.gfbc&&t.gfbt&&t.ac&&t.app&&t.sh&&t.isTest&&(e=t.gfbc,o=t.gfbt,c=t.ac,s=t.app,l=t.sh,h=t.isTest,r=!0),r){function p(n,t,i,u,f,e,o,s){var h,c,l;r&&n&&n.length>1&&(l=(c=(h=a[n])===null||h===void 0?void 0:h.sfx)!==null&&c!==void 0?c:0,a[n]=new v(t,i,l,u,f,e,o,s));return}n.init=p}v=function(){function n(n,t,r,a,v,p,w,b){var k=this,g,nt,d,tt;(this.bindEvent=function(){if(sj_be(_w,"message",k.onMessage),k.styleTransformation)for(var n=0;n<k.styleTransformation.length;n++)switch(k.styleTransformation[n]){case VRHEnums.TransformationTriggerType.OnLoad:sj_evt.bind(VRHConsts.IframeLoadedEvt,k.onIframeLoaded)}sj_evt.bind(i.HoverCancelEvt,k.unBindEvent)},this.unBindEvent=function(){sj_ue(_w,"message",k.onMessage);sj_evt.unbind(VRHConsts.IframeLoadedEvt,k.onIframeLoaded)},this.onMessage=function(n){var r,f,t;if(typeof MMMessenger!==u&&typeof MMMessenger.GetMessageData=="function"&&(t=MMMessenger.GetMessageData(n),t===null||t===void 0?void 0:t.command))switch(t.command){case VRHEnums.IframeMessage.Loaded:sj_evt.fire(i.IframeLoadedEvt,k.instMetadata,(r=t.data)===null||r===void 0?void 0:r.hasRelatedVideo);break;case VRHEnums.IframeMessage.PreviewStarted:sj_evt.fire(i.PlayerResetEvt,k.playerName);break;case VRHEnums.IframeMessage.Click:k.onVideoClick((f=t.data)===null||f===void 0?void 0:f.url);break;case VRHEnums.IframeMessage.Scroll:sj_evt.fire(i.IframeScrollEvt,k.instMetadata)}},this.onIframeLoaded=function(n){if(n&&n.length>2&&n[2]){var t=n[2];t&&k.doStyleTransformation(y)}},this.doStyleTransformation=function(n){var i,r,u,f,t,e;k.iframeContainer&&n&&(t=_qs("iframe",k.iframeContainer),e=(f=(u=(r=(i=t===null||t===void 0?void 0:t.contentWindow)===null||i===void 0?void 0:i.document)===null||r===void 0?void 0:r.body)===null||u===void 0?void 0:u.scrollHeight)!==null&&f!==void 0?f:0,e>0&&(l(t,e),c(k.iframeContainer,n)))},this.onVideoClick=function(n){var t;n&&(typeof si_ct=="function"&&k.hoverTargetAnchorElement&&si_ct(k.hoverTargetAnchorElement),_w.open(n,(t=k.hoverTargetAnchorElement)===null||t===void 0?void 0:t.target))},this.buildSrcUrl=function(n,t){if(!t||!t.iidConfig||!t.iidDynamic)return"";var i=s(n,undefined,h()?["ajaxbag","ajaxhostname"]:undefined);return i.replace(/%Q%/,t.query).replace(/%MID%/,t.mid).replace(/%IG%/,_G.IG).replace(/%IID%/,_G.P+"."+t.iidConfig).replace(/%IID_DYNAMIC%/,t.iidDynamic).replace(/%IID_STATIC%/,"vrh."+t.iidConfig).replace(/%SFX%/,k.sfx)},this.sfx=r,nt=t.isuf,this.iframeContainer=e(f,n),this.iframeContainer&&nt)&&(b&&(this.instMetadata=b),this.hoverTargetAnchorElement=p,this.styleTransformation=t.stf,this.playerName=w,d=o("iframe",this.iframeContainer),d&&(tt={query:a,mid:v,iidConfig:t.iframeInsertID,iidDynamic:(g=d.dataset)===null||g===void 0?void 0:g.iid},this.sfx++,d.setAttribute("src",this.buildSrcUrl(nt,tt))),this.bindEvent())}return n}()})(IframeContainer||(IframeContainer={}))