var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},SydFSCHelper;(function(n){function nu(i){function ai(){return ho&&so?wt||ct:ho?wt:so?ct:!1}var kc=this,ot,u,dt,p,pc,f,gt,o,c,w,b,e,ti,ii,s,ri,tt,fi,ei,nt,rt,ci,a,ft,wc,li,v,et,bc;i===void 0&&(i=null);u=_w._sydConvConfig;n.isConfigSet=!0;var vi=t(u===null||u===void 0?void 0:u.country,!1),yi=t(u===null||u===void 0?void 0:u.countryConfidence,!1),pi=t(u===null||u===void 0?void 0:u.state,!1),wi=t(u===null||u===void 0?void 0:u.city,!1),bi=t(u===null||u===void 0?void 0:u.cityConfidence,!1),ki=t(u===null||u===void 0?void 0:u.zip,!1),gi=t(u===null||u===void 0?void 0:u.timezoneoffset,!1),dc=t(u===null||u===void 0?void 0:u.enableTimezoneOffsetFromJS,!1),nr=t(u===null||u===void 0?void 0:u.dma,!1),tr=t(u===null||u===void 0?void 0:u.lat,!1),er=t(u===null||u===void 0?void 0:u.long,!1),gc=t(u===null||u===void 0?void 0:u.userIpAddress,""),nl=t(u===null||u===void 0?void 0:u.overrideSydOptions,!1),or=t(u===null||u===void 0?void 0:u.sydOptionSets,!1),sr=t(u===null||u===void 0?void 0:u.voiceSrOptions,""),hr=t(u===null||u===void 0?void 0:u.sydUrlPart,!1),st=t(u===null||u===void 0?void 0:u.isSydCorpnet,!1),tl=t(u===null||u===void 0?void 0:u.enableSydOverlay,!1),il=t(u===null||u===void 0?void 0:u.enableEdgeMobileNativeTTS,!1),rl=t(u===null||u===void 0?void 0:u.isVisualParityRun,!1),ct=t(u===null||u===void 0?void 0:u.isMSAAuthenticated,!1),ul=t(u===null||u===void 0?void 0:u.userMailId,""),fl=t(u===null||u===void 0?void 0:u.username,""),cr=t(u===null||u===void 0?void 0:u.sydBaseUrl,!1),y=t(u===null||u===void 0?void 0:u.isCompliantSydneyEndpointEnabled,!1),lt=t(u===null||u===void 0?void 0:u.isBingChatForEnterprise,!1),lr=t(u===null||u===void 0?void 0:u.isBingChatForSchools,!1);g=lr||lt;ut=g&&t(u===null||u===void 0?void 0:u.enableBfbUserCookieConsent,!1);var ar=t(u===null||u===void 0?void 0:u.sydIDs,""),vr=t(u===null||u===void 0?void 0:u.traceId,""),el=t(_w._sydConvTranslation,{}),ol=t(u===null||u===void 0?void 0:u.enableSydMic,!1),sl=t(u===null||u===void 0?void 0:u.enableSydShare,!1),hl=t(u===null||u===void 0?void 0:u.enableMessageShareableSignal,!1),cl=t(u===null||u===void 0?void 0:u.addDv3Opt,!1),ll=t(u===null||u===void 0?void 0:u.addGenContentv3Opt,!1),al=t(u===null||u===void 0?void 0:u.enable161Feats,!0),vl=t(u===null||u===void 0?void 0:u.enableAnsCardSuffix,!1),yl=t(u===null||u===void 0?void 0:u.isAdultUser,!0),pl=t(u===null||u===void 0?void 0:u.isMissingDob,!0),wl=t(u===null||u===void 0?void 0:u.removeDSAT,!0),yr=t(u===null||u===void 0?void 0:u.enableErrorTelemetry,!1),pr=t(u===null||u===void 0?void 0:u.enableSpeechContinuousErrorHandling,!1),wr=t(u===null||u===void 0?void 0:u.enableSpeechChatDataAfterPhrase,!1),at=t(u===null||u===void 0?void 0:u.enableSpeechEarconOnInput,!1),dr=t(u===null||u===void 0?void 0:u.enableTTSOnSuggestionAfterVoice,!1),bl=t(u===null||u===void 0?void 0:u.enableTTSNeverSetting,!1),gr=t(u===null||u===void 0?void 0:u.enableSimpleVoiceInput,!1),nu=t(u===null||u===void 0?void 0:u.enableSpeechDictationMode,!1),iu=t(u===null||u===void 0?void 0:u.enableAudioPreloadLimit,!1),uu=t(u===null||u===void 0?void 0:u.enableSpeechFateTTSStop,!1),ou=t(u===null||u===void 0?void 0:u.enableSpeechGetUserMedia,!1),kl=t(u===null||u===void 0?void 0:u.enableSydCLOC,!1),dl=t(u===null||u===void 0?void 0:u.enableCdxFeats,!1),su=t(u===null||u===void 0?void 0:u.cdxFeats,""),gl=t(u===null||u===void 0?void 0:u.disableSecureUpdateConversation,!1),na=t(u===null||u===void 0?void 0:u.disableSecureSendFeedback,!1),ta=t(u===null||u===void 0?void 0:u.enableFdbkFinalized,!1),ia=t(u===null||u===void 0?void 0:u.enableSemSerpShare,!1),ra=t(u===null||u===void 0?void 0:u.enableCreatorShare,!1),ua=t(u===null||u===void 0?void 0:u.enableShareModalDialog,!1),hu=t(u===null||u===void 0?void 0:u.enableSydImageCreate,!1),fa=t(u===null||u===void 0?void 0:u.enableSecureConnect,!0),ku=t(u===null||u===void 0?void 0:u.enableInstanceAffinity,!1),du=t(u===null||u===void 0?void 0:u.enableGetMessagesHub,!1),ea=t(u===null||u===void 0?void 0:u.enableShortOpt,!1),oa=t(u===null||u===void 0?void 0:u.enablePuidOvr,!1),nf=t(u===null||u===void 0?void 0:u.enablePerfTrk,!1),sa=t(u===null||u===void 0?void 0:u.enableEmbeddedPerf,!1),uf=t(u===null||u===void 0?void 0:u.enableSinglePerfEventPerMessage,!1),ha=t(u===null||u===void 0?void 0:u.enableE2EPerf,!1),ff=t(u===null||u===void 0?void 0:u.enableUnauthRedir,!1),ef=t(u===null||u===void 0?void 0:u.enableActionBarV2,!1),vt=t(u===null||u===void 0?void 0:u.speechSurface,""),sf=t(u===null||u===void 0?void 0:u.enableSpeechDictationBridgeMode,!1),hf=t(u===null||u===void 0?void 0:u.enableSpeculativeMode,!1),cf=t(u===null||u===void 0?void 0:u.enableReadAloudMessage,!1),ca=t(u===null||u===void 0?void 0:u.bypassMicPermissionsQuery,!1),lf=t(u===null||u===void 0?void 0:u.enableSpeechLanguageSetting,!1),yt=t(u===null||u===void 0?void 0:u.enableSpeechAutoDetectLanguage,!1),af=t(u===null||u===void 0?void 0:u.enableSpeechLogNoiseReduction,!1),yf=t(u===null||u===void 0?void 0:u.enableAutoReopenMic,!1),pf=t(u===null||u===void 0?void 0:u.enableAccentedIconsOnMobileABV2,!1),wf=t(u===null||u===void 0?void 0:u.enableAltVoiceQuerySubmissionOnMobileABV2,!1),bf=t(u===null||u===void 0?void 0:u.enableSpeechErrorHandling,!1),kf=t(u===null||u===void 0?void 0:u.enableSpeechAriaLabel,!1),df=t(u===null||u===void 0?void 0:u.enableSpeechReopenMic,!1),gf=t(u===null||u===void 0?void 0:u.enableSpeechTTSLatencyLogging,!1),ne=t(u===null||u===void 0?void 0:u.enableSpeechInputWhileRequestIsPending,!1),te=t(u===null||u===void 0?void 0:u.enableSpeechIconDarkTheme,!1),la=t(u===null||u===void 0?void 0:u.enableNewTopicAutoExpand,!1),aa=t(u===null||u===void 0?void 0:u.enableMaxTurnsPerConversation,!1),va=t(u===null||u===void 0?void 0:u.enableAmberTurnPerConversation,!1),ya=t(u===null||u===void 0?void 0:u.maxMessageLength,fr),wt=t(u===null||u===void 0?void 0:u.isAccountLinkedWithActiveAAD,!1),pa=t(u===null||u===void 0?void 0:u.enableThreadsAADMSASwitch,!1),ie=t(u===null||u===void 0?void 0:u.enableTelemetryPrivacy,!1),wa=t(u===null||u===void 0?void 0:u.enableSydSafeSearch,!1),ba=t(u===null||u===void 0?void 0:u.enableFeedbackClientSideScreenshot,!1),ka=t(u===null||u===void 0?void 0:u.enablePrivacyConsent,!0),da=t(u===null||u===void 0?void 0:u.syntheticStreamSpeed,pt),ga=t(u===null||u===void 0?void 0:u.disableShareWithNoMargin,!1),nv=t(u===null||u===void 0?void 0:u.enableMobileShareAnchorBottom,!1),tv=t(u===null||u===void 0?void 0:u.enableCreativeLandingPage,!1),iv=t(u===null||u===void 0?void 0:u.enableServerLogMerging,!1),re=t(u===null||u===void 0?void 0:u.enableOneClickCopy,!1),ue=t(u===null||u===void 0?void 0:u.enableReorderCopiedTextReferences,!1),fe=t(u===null||u===void 0?void 0:u.enableCodeCopy,!1),ee=t(u===null||u===void 0?void 0:u.enableCodeBar,!1),oe=t(u===null||u===void 0?void 0:u.enableCodeBarV2,!1),se=t(u===null||u===void 0?void 0:u.enableUserMessageCopy,!1),he=t(u===null||u===void 0?void 0:u.enableRichTextPaste,!1),le=t(u===null||u===void 0?void 0:u.enablePasteMarkdownTable,!1),ae=t(u===null||u===void 0?void 0:u.enablePasteMath,!1),rv=t(u===null||u===void 0?void 0:u.enableSkipContentOriginCheck,!1),uv=t(u===null||u===void 0?void 0:u.enableMobileOneClickShare,!1),fv=t(u===null||u===void 0?void 0:u.enableMobileOneClickShareV2,!1),ev=t(u===null||u===void 0?void 0:u.enableFeedbackInstrumentation,!1),ov=t(u===null||u===void 0?void 0:u.enableSuggEndFix,!1),sv=t(u===null||u===void 0?void 0:u.enableAutoRecoverFromInvalidSession,!1),hv=t(u===null||u===void 0?void 0:u.enableAutoRecoverFromInvalidSessionForFirstTurn,!1),cv=t(u===null||u===void 0?void 0:u.enableActionBarIMEFix,!1),lv=t(u===null||u===void 0?void 0:u.enableGhostTrailingSpaceByLanguage,!1),ve=t(u===null||u===void 0?void 0:u.enableInlineFeedback,!1),ye=t(u===null||u===void 0?void 0:u.enableInlineFeedbackV2,!1),pe=t(u===null||u===void 0?void 0:u.enableInlineFeedbackV21,!1),we=t(u===null||u===void 0?void 0:u.enableSerpFeedback,!1),be=t(u===null||u===void 0?void 0:u.enableMessageExport,!1),ke=t(u===null||u===void 0?void 0:u.enableMessageExportWithPlainText,!1),bt=t(u===null||u===void 0?void 0:u.nonSigningUserExportOnline,!1),de=t(u===null||u===void 0?void 0:u.enableMessageExportOnlineWord,!1),av=t(u===null||u===void 0?void 0:u.enableMessageExportWord,!1),ge=t(u===null||u===void 0?void 0:u.enableMessageExportOnlineExcel,!1),no=t(u===null||u===void 0?void 0:u.enableMessageExportLocalExcel,!1),to=t(u===null||u===void 0?void 0:u.enableTableBarFlatActions,!1),vv=t(u===null||u===void 0?void 0:u.enableThreadExportLocalWord,!1),io=t(u===null||u===void 0?void 0:u.enableThreadExportOnlineWord,!1),ro=t(u===null||u===void 0?void 0:u.enableMessageExportV2,!1),uo=t(u===null||u===void 0?void 0:u.enableBotMessageActionsBar,!1),fo=t(u===null||u===void 0?void 0:u.enableShorterToastDuration,!1),eo=t(u===null||u===void 0?void 0:u.enableDirectlyOpenExportOnlineLink,!1),oo=t(u===null||u===void 0?void 0:u.enableLoginHintForSSO,!1),so=t(u===null||u===void 0?void 0:u.enableLimitToMsaOnlineExport,!1),ho=t(u===null||u===void 0?void 0:u.enableLimitToAadOnlineExport,!1),co=t(u===null||u===void 0?void 0:u.enableTonePreview,!1),lo=t(u===null||u===void 0?void 0:u.enableMSAuth1stPartyApp,!1),ao=t(u===null||u===void 0?void 0:u.enableAdsRedirectLinkForTextMessage,!1),vo=t(u===null||u===void 0?void 0:u.enableCopyHtml,!1),yo=t(u===null||u===void 0?void 0:u.enableCopyHtmlWithHighlightedCode,!1),po=t(u===null||u===void 0?void 0:u.enableExportPdfWithAnswerScreenshot,!1),wo=t(u===null||u===void 0?void 0:u.enableExportDocxWithAnswerScreenshot,!1),bo=t(u===null||u===void 0?void 0:u.enableLibrariesSplitImport,!1),ko=t(u===null||u===void 0?void 0:u.enableFlatActionBar,!1),go=t(u===null||u===void 0?void 0:u.codexMUIDUser,!1),ns=t(u===null||u===void 0?void 0:u.enableChatIconClickable,!1),ts=t(u===null||u===void 0?void 0:u.enableChatQueryClickable,!1),is=t(u===null||u===void 0?void 0:u.enableChatQueryClickableV2,!1),rs=t(u===null||u===void 0?void 0:u.enableChatQueryClickableV3,!1),us=t(u===null||u===void 0?void 0:u.enableChatQueryClickableV4,!1),fs=t(u===null||u===void 0?void 0:u.enableShareQuestionWithResponse,!1),es=t(u===null||u===void 0?void 0:u.enableDynamicShareTitle,!1),os=t(u===null||u===void 0?void 0:u.enableShareQuestionTitlePrefix,!1),ss=t(u===null||u===void 0?void 0:u.enableShareInlineAdsIframe,!1),hs=t(u===null||u===void 0?void 0:u.enableSharePreview,!1),cs=t(u===null||u===void 0?void 0:u.enableSharedHoverCitations,!1),ls=t(u===null||u===void 0?void 0:u.enableShowShareButtonWithSecurityCheck,!1),as=t(u===null||u===void 0?void 0:u.enableScreenshotIgnoreOnCibSerp,!1),vs=t(u===null||u===void 0?void 0:u.enableStandaloneUtility,!1);n.enableCreatorSendQueryWhenShowConvQuery=t(u===null||u===void 0?void 0:u.enableCreatorSendQueryWhenShowConvQuery,!0);n.padding2TMobile=t(u===null||u===void 0?void 0:u.padding2TMobile,!0);ni=t(u===null||u===void 0?void 0:u.enableSetConvQueryFlag,!1);k=t((ot=_w._sydConvTranslation)===null||ot===void 0?void 0:ot.pageTitleText,"");d=document.title||"";l=g?kr:kt;n.enableConvModeSwitchAjax=t(u===null||u===void 0?void 0:u.enableConvModeSwitchAjax,!1);var hb=t(u===null||u===void 0?void 0:u.enableCodexWin,!1),cb=t(u===null||u===void 0?void 0:u.enableCodexWinBotMessage,!1),lb=t(u===null||u===void 0?void 0:u.codexWinCurrentTurn,0),yv=t(u===null||u===void 0?void 0:u.enableGetChats,!1),pv=t(u===null||u===void 0?void 0:u.enableDelayGetChats,!1),ys=t(u===null||u===void 0?void 0:u.enableNewTables,!1),wv=t(u===null||u===void 0?void 0:u.codexTableVersion,1),ps=t(u===null||u===void 0?void 0:u.enableBufferMessage,!1),ws=t(u===null||u===void 0?void 0:u.enableBufferLoadingDots,!1),bs=t(u===null||u===void 0?void 0:u.enableServerMetaText,!1),ks=t(u===null||u===void 0?void 0:u.enableOptimizedStreaming,!1),bv=t(u===null||u===void 0?void 0:u.enableExportDocxWithFormat,!1),kv=t(u===null||u===void 0?void 0:u.enableDisposeOrphanedHosts,!1),dv=t(u===null||u===void 0?void 0:u.enablePreserveTextFormat,!1),gv=t(u===null||u===void 0?void 0:u.enableHoverCardOnLearnMorePills,!1),ny=t(u===null||u===void 0?void 0:u.enableWowCDSSurvey,!1),ds=t(u===null||u===void 0?void 0:u.enableSydBeacon,!1),ty=t(u===null||u===void 0?void 0:u.enableShareOnHostMessage,!1),iy=t(u===null||u===void 0?void 0:u.disablePassBotGreetingInContext,!1),gs=t(u===null||u===void 0?void 0:u.enableThreadContextMenu,!1),ry=t(u===null||u===void 0?void 0:u.enableCloudflareCaptcha,!1),uy=t(u===null||u===void 0?void 0:u.enableInvisibleCaptchaChallenge,!1),fy=t(u===null||u===void 0?void 0:u.enableResizeObserverWithAnimationFrame,!1),ey=t(u===null||u===void 0?void 0:u.enableKnowledgeCardImage,!1),nh=t(u===null||u===void 0?void 0:u.enableStartPromotion,!1),oy=t(u===null||u===void 0?void 0:u.enableCopyButtonInstrumented,!1),sy=t(u===null||u===void 0?void 0:u.enableThreadSync,!1),hy=t(u===null||u===void 0?void 0:u.enableMobileKnowledgeCardOverlay,!1),cy=t(u===null||u===void 0?void 0:u.enableCibOverlayForKnowledgeCard,!1),ly=t(u===null||u===void 0?void 0:u.enableFlux3P,!1),ay=t(u===null||u===void 0?void 0:u.enablePluginsByTone,!1),ab=t(u===null||u===void 0?void 0:u.flux3PPluginList,""),th=t(u===null||u===void 0?void 0:u.disableWelcomeScreen,!1),vy=t(u===null||u===void 0?void 0:u.enableWelcomeScreenV2,!1),yy=t(u===null||u===void 0?void 0:u.enableChatFRE,!1),ih=t(u===null||u===void 0?void 0:u.enableWebPageContextMessages,!1),py=t(u===null||u===void 0?void 0:u.enableCodexPluginb,!1),wy=t(u===null||u===void 0?void 0:u.enableNewAutoSuggestEndPoint,!1),by=t(u===null||u===void 0?void 0:u.enable2TQueryConfigsOnSerpLoad,!1),ky=t(u===null||u===void 0?void 0:u.enableSydStaticAdsLink,!1),dy=t(u===null||u===void 0?void 0:u.isMobileHost,!1),gy=t(u===null||u===void 0?void 0:u.enableRenderCardRequestIMSearchParams,!1),rh=t(u===null||u===void 0?void 0:u.enableMessagePrivacy,!1),uh=t(u===null||u===void 0?void 0:u.enableCloseShareOnClickOutside,!1),np=t(u===null||u===void 0?void 0:u.enableTypingIndicatorForSerpSlotCreator,!1),tp=t(u===null||u===void 0?void 0:u.enableOnProcessingStartEvent,!1),ip=t(u===null||u===void 0?void 0:u.enableOnProcessingCompleteEvent,!1),fh=t(u===null||u===void 0?void 0:u.enableUpdateProfile,!1),rp=t(u===null||u===void 0?void 0:u.enableTypewriter,!1),up=t(u===null||u===void 0?void 0:u.enableConfirmPromptSingleDeleteThread,!1),fp=!t(u===null||u===void 0?void 0:u.disableTooltip,!1),ep=t(u===null||u===void 0?void 0:u.enableNewlineTooltip,!1),op=t(u===null||u===void 0?void 0:u.enableDeferredImageCreatorCard,!1),sp=t(u===null||u===void 0?void 0:u.enableSaharaStream,!1),hp=t(u===null||u===void 0?void 0:u.enableFaviconsV2,!1),cp=t(u===null||u===void 0?void 0:u.enableFaviconsAutoRefresh,!1),lp=t(u===null||u===void 0?void 0:u.enableCachedContentFixForIsStartOfSession,!1),ap=t(u===null||u===void 0?void 0:u.enableUserIpAddress,!1),vp=t(u===null||u===void 0?void 0:u.enableLooseMessageDensity,!1),eh=t(u===null||u===void 0?void 0:u.enableSuggestionItemEnterAnimation,!1),oh=t(u===null||u===void 0?void 0:u.enableKatexScroll,!1),yp=t(u===null||u===void 0?void 0:u.enableLinkPreviewCarousel,!1),pp=t(u===null||u===void 0?void 0:u.useFakeDataForLinkPreviewCarousel,!1),sh=t(u===null||u===void 0?void 0:u.enablePageHeaderOverlapClamping,!1),wp=t(u===null||u===void 0?void 0:u.enableThreadShowPlugins,!1),bp=t(u===null||u===void 0?void 0:u.enableUpdateUserMessageId,!1),kp=t(u===null||u===void 0?void 0:u.enableUserMessageIdConsistency,!1),dp=t(u===null||u===void 0?void 0:u.enablePluginPanelFre,!1),gp=t(u===null||u===void 0?void 0:u.enablePersistentInputText,!1),hh=t(u===null||u===void 0?void 0:u.enableEmptyThreadTime,!1),nw=t(u===null||u===void 0?void 0:u.enableRenderIframeCardRequest,!1),ch=t(u===null||u===void 0?void 0:u.enableBackendExportService,!1),tw=t(u===null||u===void 0?void 0:u.enableFastChatLoadAnimation,!1),iw=t(u===null||u===void 0?void 0:u.enableShareInThreadsHeader,!0),vb=t(u===null||u===void 0?void 0:u.enableExternalSpeechIconAnimation,!1),rw=t(u===null||u===void 0?void 0:u.enableNewConversationActivate,!1),lh=t(u===null||u===void 0?void 0:u.enableInPrivateUserMode,!1),uw=t(u===null||u===void 0?void 0:u.enableMobileFirstClickShare,!1),ah=t(u===null||u===void 0?void 0:u.enableSydneyGetMessagesHub,!1),fw=t(u===null||u===void 0?void 0:u.enableInlinePersonalizationConsent,!1),ew=t(u===null||u===void 0?void 0:u.personalizationInlineConsentTurn,ur),vh=t(u===null||u===void 0?void 0:u.enableEduStarterMessage,!1),ow=t(u===null||u===void 0?void 0:u.enableEduStarterMessageAnimation,!1),sw=t(u===null||u===void 0?void 0:u.enablePhonePlugin,!1),hw=t(u===null||u===void 0?void 0:u.enablePhonePluginDogfoodEnvironment,!1),cw=t(u===null||u===void 0?void 0:u.enablePhonePluginBetaEnvironment,!1),lw=t(u===null||u===void 0?void 0:u.enablePhonePluginProductionEnvironment,!1),aw=t(u===null||u===void 0?void 0:u.enableAdaptiveCardMessage,!1),yh=t(u===null||u===void 0?void 0:u.enableVersionedApiCalls,!1),ph=t(u===null||u===void 0?void 0:u.enableJWTFTRFix,!1),vw=t(u===null||u===void 0?void 0:u.enablePaywallTelemetryFix,!1),yw=t(u===null||u===void 0?void 0:u.enableNoBingSearchResponseBackground,!1),pw=t(u===null||u===void 0?void 0:u.enableNoSearchPluginMetaMessage,!1),wh=t(u===null||u===void 0?void 0:u.enableOpenEdgeNotification,!1),bh=t(u===null||u===void 0?void 0:u.enableSuppressSigninMessage,!1),kh=t(u===null||u===void 0?void 0:u.enableExportPdfWithRichFormat,!1),dh=t(u===null||u===void 0?void 0:u.enableAttributionImages,!1),gh=t(u===null||u===void 0?void 0:u.enableAttributionImagesWhenAdsPresent,!1),nc=t(u===null||u===void 0?void 0:u.enableAttributionImagesCarousel,!1),tc=t(u===null||u===void 0?void 0:u.enableAttributionImagesClickthrough,!1),ww=t(u===null||u===void 0?void 0:u.enableThreadsConsent,!1),ic=t(u===null||u===void 0?void 0:u.enableDeleteSingleConversationMemory,!1),bw=t(u===null||u===void 0?void 0:u.enableThreadsTopRightButton,!1),kw=t(u===null||u===void 0?void 0:u.enablePluginsTopRightButton,!1),rc=t(u===null||u===void 0?void 0:u.enableOneDs,!1),dw=t(u===null||u===void 0?void 0:u.enableSydneyFSCTranslationSrc,!1),gw=t(u===null||u===void 0?void 0:u.enableBceMuidConsent,!1),uc=t(u===null||u===void 0?void 0:u.enableThreadContextMenuV2,!1),fc=t(u===null||u===void 0?void 0:u.enableSearchBoxAutoFocus,!1),ec=t(u===null||u===void 0?void 0:u.enableUserMessageRewriteInsteadOfCopy,!1),oc=t(u===null||u===void 0?void 0:u.enableUserMessageRewriteAndCopy,!1),sc=t(u===null||u===void 0?void 0:u.enableEditLastUserMessage,!1),hc=t(u===null||u===void 0?void 0:u.enableHideLastUserMessageInEdit,!1),cc=t(u===null||u===void 0?void 0:u.enablePrivateThreadDefaultTitle,!1),lc=t(u===null||u===void 0?void 0:u.enablePromptHandling,!1),nb=t(u===null||u===void 0?void 0:u.enableU18Scenario,!1),tb=t(u===null||u===void 0?void 0:u.enablePluginDevTools,!1),ac=t(u===null||u===void 0?void 0:u.enableModeAndSlotValidationForAds,!1),ib=t(u===null||u===void 0?void 0:u.enableLogNoChatVariant,!1),rb=t(u===null||u===void 0?void 0:u.enableVersionPrompt,!1),ub=t(u===null||u===void 0?void 0:u.enableAttributionsV2,!1),fb=t(u===null||u===void 0?void 0:u.enableLearnMoreCards,!1),vc=t(u===null||u===void 0?void 0:u.enableInlineComponents,!1),yc=t(u===null||u===void 0?void 0:u.enableSuggestionChipDisplayText,!1),eb=t(u===null||u===void 0?void 0:u.enableLinkPreviewFailureTelemetry,!1),ob=t(u===null||u===void 0?void 0:u.enableLinkPreviewAppIdV2,!1),sb=t(u===null||u===void 0?void 0:u.isCopilotChat,!1);if(tu(),dt=t(u===null||u===void 0?void 0:u.enableFixOnReplaceAllJSError,!1),p=t(u===null||u===void 0?void 0:u.enableNotebookMode,!1),p&&(CIB.config.features.enableNotebookMode=p),lh&&(CIB.config.features.enableInPrivateUserMode=lh),sb&&(CIB.config.bingAtWork.feedback.disableNonCompliantSerpFeedback=!0),sj_evt.bind("showSydFSC",ui),ny&&(CIB.config.features.enableWowCDSSurvey=!0),vp&&(CIB.config.messaging.messageDensity="loose"),eh&&(CIB.config.features.enableSuggestionItemEnterAnimation=eh),oh&&(CIB.config.features.enableKatexScroll=oh),CIB.config.features.enableVersionPrompt=rb,CIB.config.features.enableAttributionsV2=ub,CIB.config.features.enableLearnMoreCards=fb,pc=_ge("cib-design-tokens"),pc||CIB.activateDesignTokens(),f={},vi&&(f.country=vi),pi&&(f.state=pi),wi&&(f.city=wi),ki&&(f.zipcode=ki),dc||y?f.timezoneoffset=-((new Date).getTimezoneOffset()/60):gi&&(f.timezoneoffset=parseFloat(gi)),nr&&(f.dma=nr),tr&&(f.latitude=parseFloat(tr)),er&&(f.longitude=parseFloat(er)),yi&&(f.countryConfidence=yi),bi&&(f.cityConfidence=bi),y?(gt=Intl.DateTimeFormat().resolvedOptions().timeZone,gt&&(f.timezone=gt),CIB.config.sydney.message.locationInfo=f):i&&typeof i.locations!="undefined"&&typeof i.locations.locationsList!="undefined"?typeof SydneyFSCLocationHelper!="undefined"&&typeof SydneyFSCLocationHelper.writeToLocationHints!="undefined"&&SydneyFSCLocationHelper.writeToLocationHints(i):i&&typeof i.cookLoc!="undefined"?(o=[],i.cookLoc.userLoc&&(c=ht(i.cookLoc.userLoc,!1),c.RegionType=1,c.SourceType=2,c.FDConfidence=1,o.push(c)),i.cookLoc.deviceLoc&&(w=ht(i.cookLoc.deviceLoc,!1),w.RegionType=2,w.SourceType=5,o.push(w)),kl&&i.cookLoc.coarseLoc&&(b=ht(i.cookLoc.coarseLoc,!1),b.RegionType=2,b.SourceType=11,o.push(b)),e=f,e.Center={Latitude:e.latitude,Longitude:e.longitude},delete e.latitude,delete e.longitude,e.RegionType=2,e.SourceType=1,o.push(e),CIB.config.sydney.message.locationHints=o):CIB.config.sydney.message.locationinfo=f,ap&&(CIB.config.sydney.message.userIpAddress=gc),CIB.config.sydney.message.timestamp=vf(),dw?sj_evt.bind("sydConvTranslationLoaded",oi,!0):si(el),yh&&(CIB.config.features.enableVersionedApiCalls=yh),ph&&(CIB.config.features.enableJWTFTRFix=ph),yv&&(CIB.config.features.enableGetChats=!0),pv&&(CIB.config.features.enableDelayGetChats=!0),sy&&(CIB.config.features.enableThreadSync=!0),rp&&(CIB.config.features.enableTypewriterEffectForThreadName=!0),sp&&(CIB.config.features.enableSaharaSyntheticStreaming=!0),hp&&(CIB.config.features.enableFaviconV2=!0),cp&&(CIB.config.features.enableFaviconAutoRefresh=!0),lp&&(CIB.config.features.enableCachedContentFixForIsStartOfSession=!0),ly&&(CIB.config.features.enableFlux3P=!0,typeof CIB.config.plugin=="undefined"&&(CIB.config.plugin={})),eb&&(CIB.config.features.enableLinkPreviewFailureTelemetry=!0),ob&&(CIB.config.features.enableLinkPreviewAppIdV2=!0),fw){CIB.config.features.enableInlinePersonalizationConsent=!0;CIB.config.messaging.personalizationInlineConsentTurn=ew;try{fetch("/turing/userconsent")}catch(yb){}}if(ay&&(CIB.config.features.enablePluginsByTone=!0),tb&&(CIB.config.features.enablePluginDevTools=!0),up&&(CIB.config.features.enableConfirmPromptForDeleteSingleThread=!0),op&&(CIB.config.features.enableDeferredImageCreatorCard=!0),py&&(CIB.config.features.enableOpenTableBookBlueLink=!0),gy&&(CIB.config.features.enableRenderCardRequestIMSearchParams=!0),yp&&(CIB.config.features.enableLinkPreviewCarousel=!0),pp&&(CIB.config.features.useFakeDataForLinkPreviewCarousel=!0),wp&&(CIB.config.features.enableThreadShowPlugins=!0),bp&&(CIB.config.features.enableUpdateUserMessageId=!0),kp&&(CIB.config.features.enableUserMessageIdConsistency=!0),dp&&(CIB.config.features.enablePluginPanelFre=!0),nw&&(CIB.config.features.enableRenderIframeCardRequest=!0),vh&&(CIB.config.features.enableFreEducationalStarter=!0),ow&&(CIB.config.features.enableFreEducationalStarterAnimation=!0),sw&&(CIB.config.features.enablePhonePlugin=!0),lw&&(CIB.config.features.enablePhonePluginProductionEnvironment=!0),cw&&(CIB.config.features.enablePhonePluginBetaEnvironment=!0),hw&&(CIB.config.features.enablePhonePluginDogfoodEnvironment=!0),aw&&(CIB.config.features.enableAdaptiveCardMessage=!0),yw&&(CIB.config.features.enableNoBingSearchResponseBackground=!0),pw&&(CIB.config.features.enableNoSearchPluginMetaMessage=!0),ti=new URLSearchParams(_w.location.search),ii=ti.get(rr.toLowerCase()),(sr!=""||st&&ii)&&(s=CIB.config.speech.srOptions?CIB.config.speech.srOptions:[],s=h(s,sr),st&&(s=h(s,ii)),CIB.config.speech.srOptions=s),at&&(CIB.config.speech.srOptions||(CIB.config.speech.srOptions=[]),CIB.config.speech.srOptions.push("earcon")),vt&&(CIB.config.speech.query.surface=vt,CIB.config.speech.surface=vt),yt&&(CIB.config.speech.srOptions||(CIB.config.speech.srOptions=[]),CIB.config.speech.srOptions.push("cdxdlid"),CIB.config.speech.srOptions.push("autotts")),CIB.config.sydney.isAdultUser=pl?null:yl,wl&&(ri=CIB.config.sydney.request.optionsSets.indexOf("enable_debug_commands"),ri>=0&&CIB.config.sydney.request.optionsSets.splice(ri,1)),cl&&r(CIB.config.sydney.request.optionsSets,"dv3sugg"),ll&&r(CIB.config.sydney.request.optionsSets,"gencontentv3"),ea&&r(CIB.config.sydney.request.optionsSets,"prodshortv4"),nl&&or!=""&&(CIB.config.sydney.request.optionsSets=h([],or)),dl){if(su)for(nt=su.split(","),tt=0,fi=nt;tt<fi.length;tt++)a=fi[tt],CIB.config.features[a]=!0;if(ei=ti.get(ir.toLowerCase()),st&&ei)for(nt=ei.split(","),rt=0,ci=nt;rt<ci.length;rt++)a=ci[rt],a.indexOf(":")>=0&&(ft=a.split(":"),ft.length==2&&(CIB.config.features[ft[0]]=ft[1]))}if(ar&&(wc=ar.split(","),CIB.config.sydney.request.sliceIds=wc),CIB.config.bing.isVisualParityRun=rl,CIB.config.bing.isMSAAuthenticated=ct,CIB.config.bing.userMailId=ul,CIB.config.bing.username=fl,cr&&(CIB.config.sydney.baseUrl=cr),hr!=""&&(CIB.config.sydney.pathBase=hr),bl&&(li=sj_cook.get(n.userCook,br),li&&li=="0"&&(CIB.config.features.enableTTSOnVoiceInput=!1)),pr&&(CIB.config.features.enableSpeechContinuousErrorHandling=pr),wr&&(CIB.config.features.enableSpeechChatDataAfterPhrase=wr),at&&(CIB.config.features.enableSpeechEarconOnInput=at),dr&&(CIB.config.features.enableTTSOnSuggestionAfterVoice=dr),gr&&(CIB.config.features.enableSimpleVoiceInput=gr),nu&&(CIB.config.features.enableSpeechDictationMode=nu),iu&&(CIB.config.features.enableAudioPreloadLimit=iu),uu&&(CIB.config.features.enableSpeechFateTTSStop=uu),ou&&(CIB.config.features.enableSpeechGetUserMedia=ou),bf&&(CIB.config.features.enableSpeechErrorHandling=bf),gf&&(CIB.config.features.enableSpeechTTSLatencyLogging=gf),ne&&(CIB.config.features.enableSpeechInputWhileRequestIsPending=ne),te&&(CIB.config.features.enableSpeechIconDarkTheme=te),kf&&(CIB.config.features.enableSpeechAriaLabel=kf),df&&(CIB.config.features.enableAutoReopenMic=df),il&&(CIB.config.speech.textToSpeechProvider=SydneySuperAppConnector.getTextToSpeechProvider),cu(),ns&&(CIB.config.features.enableChatIconClickable=ns),ts&&(CIB.config.features.enableChatQueryClickable=ts),is&&(CIB.config.features.enableChatQueryClickableV2=is),rs&&(CIB.config.features.enableChatQueryClickableV3=rs),us&&(CIB.config.features.enableChatQueryClickableV4=us),fs&&(CIB.config.features.enableShareQuestionWithResponse=fs),es&&(CIB.config.features.enableDynamicShareTitle=es),os&&(CIB.config.features.enableShareQuestionTitlePrefix=os),ss&&(CIB.config.features.enableShareInlineAdsIframe=ss),hs&&(CIB.config.features.enableSharePreview=hs),cs&&(CIB.config.features.enableSharedHoverCitations=cs),as&&(CIB.config.features.enableScreenshotIgnoreOnCibSerp=as),vs&&(CIB.config.features.enableStandaloneUtility=vs),CIB.config.speech.animationProvider=function(){var n=location.origin+"/CodexAnimations/animations.json";return kc.getJsonData(n)},tl&&(CIB.config.features.enableMetaMessages=!1,CIB.config.features.enableLearnMore=!1,CIB.config.features.enableCitations=!1,CIB.config.features.enableWelcomeScreen=!1,CIB.config.features.enableShare=!1,CIB.config.features.enableStopButton=!1,CIB.config.features.enableAnswerCards=!1,CIB.config.features.enableAds=!1),vr&&(CIB.config.sydney.request.traceId=vr),CIB.config.features.enableSpeechInput=ol,CIB.config.features.enableShare=sl,CIB.config.features.enableMessageShareableSignal=hl,al&&(CIB.config.features.enableErrorStateNotification=!0,CIB.config.features.enableErrorStateToastNotificationResetButton=!0,CIB.config.features.enableGhostedAutoSuggest=!0,CIB.config.features.enableHoverCardAttributionFavicons=!0),sv&&(CIB.config.features.enableAutoRecoverFromInvalidSession=!0),hv&&(CIB.config.features.enableAutoRecoverFromInvalidSessionForFirstTurn=!0),cv&&(CIB.config.features.enableActionBarIMEFix=!0),lv&&(CIB.config.features.enableGhostTrailingSpaceByLanguage=!0),yr&&(CIB.config.features.enableErrorInstrumentaton=yr),hu&&(CIB.config.features.enableSydImageCreate=hu),vc&&(CIB.config.features.enableInlineComponents=vc),eu(),lu(),fu(),vl&&(CIB.config.features.enableAnsCardSfx=!0),ba&&(CIB.config.features.enableFeedbackClientSideScreenshot=!0),ka&&(go||lt&&gw?ru():p&&(CIB.config.features.enablePrivacyConsentFormNonMuid=!0,hi())),kv&&(CIB.config.features.enableDisposeOrphanedHosts=!0),dv&&(CIB.config.features.enablePreserveTextFormat=!0),gv&&(CIB.config.features.enableHoverCardOnLearnMorePills=!0),ry&&(CIB.config.features.enableCloudflareCaptcha=!0),uy&&(CIB.config.features.enableInvisibleCaptchaChallenge=!0),fy&&(CIB.config.features.enableResizeObserverWithAnimationFrame=!0),bv&&(CIB.config.features.enableExportDocxWithFormat=!0),vw&&(CIB.config.features.enablePaywallTelemetryFix=!0),CIB.config.features.enableSecureUpdateConversation=!gl,CIB.config.features.enableSecureSendFeedback=!na,CIB.config.features.enableShareSemSerp=ia,CIB.config.features.enableShareCreator=ra,CIB.config.features.enableFeedbackOnFinalized=ta,CIB.config.features.enableShareWithNoMargin=!ga,CIB.config.features.enableMobileShareAnchorBottom=nv,CIB.config.features.enableCreativeLandingPage=tv,CIB.config.features.enableServerLogMerging=iv,CIB.config.features.enableSkipContentOriginValidation=rv,CIB.config.features.enableMobileOneClickShare=uv,CIB.config.features.enableMobileOneClickShareV2=fv,CIB.config.features.enableFeedbackInstrumentation=ev,CIB.config.features.enableCopyButtonInstrumented=oy,CIB.config.features.enableShareModalDialog=ua,CIB.config.features.enableShareOnHostMessage=ty,CIB.config.features.enablePassBotGreetingInContext=!iy,CIB.config.features.enableMobileKnowledgeCardOverlay=hy,CIB.config.features.enableCibOverlayForKnowledgeCard=cy,CIB.config.features.enableNewAutoSuggestEndPoint=wy,CIB.config.features.enableNewTopicTooltip=fp,CIB.config.features.enableNewlineTooltip=ep,CIB.config.features.enableTypingIndicatorForSerpSlotCreator=np,CIB.config.features.enableOnProcessingStartEvent=tp,CIB.config.features.enableOnProcessingCompleteEvent=ip,CIB.config.messaging.maxMessageLength=ya,CIB.config.features.enableThreadsAadMsaSwitch=pa,CIB.config.messaging.isAccountLinkedAadUser=wt,CIB.config.features.enableFastChatLoadAnimation=tw,CIB.config.features.enableShareInThreadsHeader=iw,CIB.config.features.enableNewConversationActivate=rw,CIB.config.features.enableMobileFirstClickShare=uw,CIB.config.features.enableThreadsTopRightButton=bw,CIB.config.features.enablePluginsTopRightButton=kw,(vy||yy)&&(CIB.config.features.enableWelcomeScreen=th,CIB.config.features.enableWelcomeScreenItem=!th),vh&&SydWelcomeScreen.isEduStarterEnabled()&&(CIB.config.features.enableWelcomeScreen=!0,CIB.config.features.enableWelcomeScreenItem=!0),ey&&(CIB.config.features.enableKnowledgeCardImage=!0,CIB.config.features.enableImagesInTextMessages=!0,ce()),CIB.config.features.secureConversation=fa,ku&&(CIB.config.features.enableAffinityInstance=ku,r(CIB.config.sydney.request.optionsSets,"machine_affinity"),r(CIB.config.sydney.request.optionsSets,"streamf")),du&&(CIB.config.features.enableGetMessagesHub=du),la&&(CIB.config.features.enableNewTopicAutoExpand=!0),va&&(CIB.config.features.enableAmberTurnPerConversation=!0,CIB.config.messaging.amberTurnPerConversation=t(u===null||u===void 0?void 0:u.amberTurnPerConversation,0)),aa&&(CIB.config.features.enableMaxTurnsPerConversation=!0,CIB.config.features.enableMaxTurnsFromBackend=t(u===null||u===void 0?void 0:u.enableMaxTurnsFromBackend,!1),CIB.config.messaging.maxTurnsPerConversation=go?t(u===null||u===void 0?void 0:u.maxTurnsPerConversationMuidUser,it):t(u===null||u===void 0?void 0:u.maxTurnsPerConversation,it)),oa&&(CIB.config.sydney.request.Participant={Id:"1"}),nf&&(CIB.config.features.enablePerfTracker=nf),sa&&(CIB.config.features.enableEmbeddedPerf=!0),uf&&(CIB.config.features.enableSinglePerfEventPerMessage=uf),ha&&(CIB.config.features.enableE2EPerf=!0),ff&&(CIB.config.features.enableRedirectToLoginUrl=ff),ef&&(CIB.config.features.enableActionBarV2=ef),sf&&(CIB.config.features.enableSpeechDictationBridgeMode=sf),hf&&(CIB.config.features.enableSpeculativeMode=hf),cf&&(CIB.config.features.enableReadAloudMessage=cf),lf&&(CIB.config.features.enableSpeechLanguageSetting=lf),yt&&(CIB.config.features.enableSpeechAutoDetectLanguage=yt),af&&(CIB.config.features.enableSpeechLogNoiseReduction=af),yf&&(CIB.config.features.enableAutoReopenMic=yf),pf&&(CIB.config.features.enableAccentedIconsOnMobileABV2=pf),wf&&(CIB.config.features.enableAltVoiceQuerySubmissionOnMobileABV2=wf),ca&&(CIB.config.speech.micPermissionProvider=function(){return{}}),wa&&(CIB.config.features.enableSafeSearchSetting=!0,gu()),CIB.config.messaging.messageBufferWorkerStreamDelayMS=da,ov&&(CIB.config.suggestions.baseUrl="https://www.bing.com"),re&&(CIB.config.features.enableOneClickCopy=re),ue&&(CIB.config.features.enableReorderCopiedTextReferences=ue),fe&&(CIB.config.features.enableCodeCopy=fe),ee&&(CIB.config.features.enableCodeBar=ee),oe&&(CIB.config.features.enableCodeBarV2=oe),se&&(CIB.config.features.enableUserMessageCopy=se),he&&(CIB.config.features.enableRichTextPaste=he),le&&(CIB.config.features.enablePasteMarkdownTable=le),ae&&(CIB.config.features.enablePasteMath=ae),ve&&(CIB.config.features.enableInlineFeedback=ve),ye&&(CIB.config.features.enableInlineFeedbackV2=ye),pe&&(CIB.config.features.enableInlineFeedbackV21=pe),we&&(CIB.config.features.enableSerpFeedback=we),be&&(CIB.config.features.enableMessageExport=be),ke&&(CIB.config.features.enableMessageExportWithPlainText=ke),de&&(CIB.config.features.enableMessageExportOnlineWord=bt?de:ai()),ge&&(CIB.config.features.enableMessageExportOnlineExcel=bt?ge:ai()),co&&(CIB.config.features.enableTonePreview=co),CIB.config.features.enableMessageExportWord=av,CIB.config.features.enableThreadExportLocalWord=vv,no&&(CIB.config.features.enableMessageExportLocalExcel=no),to&&(CIB.config.features.enableTableBarFlatActions=to),io&&(CIB.config.features.enableThreadExportOnlineWord=bt?io:ai()),ro&&(CIB.config.features.enableMessageExportV2=ro),uo&&(CIB.config.features.enableBotMessageActionsBar=uo),fo&&(CIB.config.features.enableShorterToastDuration=fo),eo&&(CIB.config.features.enableDirectlyOpenExportOnlineLink=eo),oo&&(CIB.config.features.enableLoginHintForSSO=oo),lo&&(CIB.config.features.enableMSAuth1stPartyApp=lo),ao&&(CIB.config.features.enableAdsRedirectLinkForTextMessage=ao),vo&&(CIB.config.features.enableCopyHtml=vo),yo&&(CIB.config.features.enableCopyHtmlWithHighlightedCode=yo),po&&(CIB.config.features.enableExportPdfWithAnswerScreenshot=po),wo&&(CIB.config.features.enableExportDocxWithAnswerScreenshot=wo),bo&&(CIB.config.features.enableLibrariesSplitImport=bo),ko&&(CIB.config.features.enableFlatActionBar=ko),ds&&(CIB.config.features.enableSydBeacon=ds),nh&&(CIB.config.features.enableStartPromotion=nh),gs&&(CIB.config.features.enableThreadContextMenu=gs),ys&&(CIB.config.features.enableNewTables=ys,CIB.config.messaging.tableVersion=wv),ps&&(CIB.config.features.enableBufferMessage=ps),ws&&(CIB.config.features.enableBufferLoadingDots=ws),bs&&(CIB.config.features.enableServerMetaText=bs),rh&&(CIB.config.features.enableMessagePrivacy=rh),uh&&(CIB.config.features.enableCloseShareOnClickOutside=uh),ls&&(CIB.config.features.enableShowShareButtonWithSecurityCheck=ls),ks&&(CIB.config.features.enableOptimizedStreaming=ks),ah&&(CIB.config.features.enableSydneyGetMessagesHub=ah),fh&&(CIB.config.features.enableUpdateProfile=fh),bh&&(CIB.config.features.enableSuppressSigninMessage=bh),wh&&(CIB.config.features.enableOpenEdgeNotification=wh),kh&&(CIB.config.features.enableExportPdfWithRichFormat=kh),dh&&(CIB.config.features.enableAttributionImages=dh),gh&&(CIB.config.features.enableAttributionImagesWhenAdsPresent=gh),nc&&(CIB.config.features.enableAttributionImagesCarousel=nc),tc&&(CIB.config.features.enableAttributionImagesClickthrough=tc),uc&&(CIB.config.features.enableThreadContextMenuV2=uc),fc&&(CIB.config.features.enableSearchBoxAutoFocus=fc),ec&&(CIB.config.features.enableUserMessageRewriteInsteadOfCopy=ec),oc&&(CIB.config.features.enableUserMessageRewriteAndCopy=oc),sc&&(CIB.config.features.enableEditLastUserMessage=sc),hc&&(CIB.config.features.enableHideLastUserMessageInEdit=hc),dt&&(CIB.config.features.enableFixOnReplaceAllJSError=dt),vu(),yu(),ch&&(CIB.config.features.enableBackendExportService=ch),au(),ih&&(CIB.config.features.enableContextMessage=ih),v=t(u===null||u===void 0?void 0:u.codexOptionsSetsList,null),v&&v.length>0)for(et=0;et<v.length;et++)r(CIB.config.sydney.request.optionsSets,v[et].value);pu();by&&di(dy,ky);ie&&(CIB.config.features.enableTelemetryPrivacy=ie);y&&typeof MsbSydneyHelper!="undefined"?MsbSydneyHelper.initCompliantSydneyConfigs():lr&&typeof BcsSydneyHelper!="undefined"?BcsSydneyHelper.initBingChatForSchoolsSydneyConfigs():lt&&typeof BceSydneyHelper!="undefined"&&BceSydneyHelper.initBingChatForEnterpriseSydneyConfigs();y||(bu(),wu());sh&&(CIB.config.features.enablePageHeaderOverlapClamping=sh);gp&&(CIB.config.features.enablePersistentInputText=!0);hh&&(CIB.config.features.enableEmptyThreadTime=hh);CIB.config.features.enableThreadsConsent=ww;ic&&(bc=t(u===null||u===void 0?void 0:u.threadsAutoSaveOptionset,"autosave"),CIB.config.features.enableDeleteSingleConversationMemory=ic,CIB.config.sydney.request.conversationHistoryOptionsSets=[bc,"savemem","uprofupd","uprofgen"]);rc&&(CIB.config.features.enable1DSTelemetry=rc);cc&&(CIB.config.features.enablePrivateThreadDefaultTitle=cc);lc&&(CIB.config.features.enablePromptHandling=lc);nb&&r(CIB.config.sydney.request.optionsSets,"u18Scenario");ac&&(CIB.config.features.enableModeAndSlotValidationForAds=ac);yc&&(CIB.config.features.enableSuggestionChipDisplayText=yc);tf();ib&&rf()}function tu(){var i,r=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydTestCache,!1);r&&"SydneyTestHelper"in _w&&(SydneyTestHelper.setTestConfigs(),sj_evt.bind("CHAT_MOCKED",function(t){var i=t&&t.length>1?t[1]:null;i&&(n.processCachedResponseUsingCIB=function(){CIB.processCachedResponse(i)})},!0))}function ui(){var i,r,u,f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableCodexWin,!1),e=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.codexWinCurrentTurn,0),o=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableCodexWinBotMessage,!1);f&&(sj_cook.set(n.userCook,pr,String(e+1),!0,"/",null),o&&(n.shouldForceSendBotGreeting=!0));sj_evt.unbind("showSydFSC",ui)}function iu(){var n,i=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableDM,!1);i&&CIB.changeColorScheme&&CIB.changeColorScheme(1)}function fi(){var n=Math.round(_d.documentElement.clientWidth||_w.innerWidth);return n<100&&(n=360),n}function ei(){var n=Math.round(_d.documentElement.clientHeight||_w.innerHeight);return n<100&&(n=636),n}function oi(){si(_w._sydConvTranslation);sj_evt.unbind("sydConvTranslationLoaded",oi)}function si(n){for(var r,t=0,i=Object.keys(n);t<i.length;t++)r=i[t],CIB.config.strings[r]=n[r]}function ru(){CIB.config.features.enableMUIDUserMode=!0;CIB.config.features.enableSignInUpsellforMuidUser=!0;hi()}function hi(){var n,i,r,u=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableCodexMuidConsentTop,!1),f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableCodexMuidConsentExplicit,!1),e=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableCodexMuidConsentImplicit,!1),o=u||f||e;o&&(CIB.config.features.enableCodexMuidConsentTop=u,CIB.config.features.enableCodexMuidConsentInlineExplicit=f,CIB.config.features.enableCodexMuidConsentInlineImplicit=e,CIB.config.sydney.muidUserConsentGiven=ci(),CIB.onConsentGiven&&CIB.onConsentGiven(function(){nf()}))}function uu(){var n,i;return __awaiter(this,void 0,void 0,function(){var u,f,e,o,s,h;return __generator(this,function(c){switch(c.label){case 0:if(u=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableThreadsConsent,!1),f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.threadsAutoSaveOptionset,"autosave"),CIB.config.features.enableThreadsConsent=u,u&&CIB.onAutosaveConsentChanged)CIB.onAutosaveConsentChanged(function(n){switch(n){case"Allowed":r(CIB.config.sydney.request.optionsSets,f);break;default:lf(CIB.config.sydney.request.optionsSets,f)}});if(!(u&&CIB.getConsent&&CIB.updateConsent))return[3,6];c.label=1;case 1:return c.trys.push([1,5,,6]),[4,CIB.getConsent()];case 2:return(e=c.sent(),o=e.consentSettings.autoSave,s=e.consentSettings.personalization,!(o&&s))?[3,4]:[4,CIB.updateConsent(o,s)];case 3:c.sent();c.label=4;case 4:return[3,6];case 5:return h=c.sent(),[3,6];case 6:return[2]}})})}function fu(){var n=_w._sydConvConfig,i=t(n===null||n===void 0?void 0:n.enableImageSearch,!1);if(i){var r=t(n===null||n===void 0?void 0:n.imageSearchFormCode,""),u=t(n===null||n===void 0?void 0:n.imageSearchEnableMediaCanvas,!0),f=t(n===null||n===void 0?void 0:n.imageSearchMaxImageCount,3),e=t(n===null||n===void 0?void 0:n.imageSearchForceSquareImages,!1);CIB.config.features.enableImageSearch=i;CIB.config.imageSearch.forceSquareImages=e;CIB.config.imageSearch.maxImageCount=f;CIB.config.imageSearch.enableMediaCanvas=u;r&&(CIB.config.imageSearch.query.form=r)}}function eu(){var n,i,r,u,f,e,o,s,h,c,l,a=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableVisualSearch,!1);if(a){var y=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.removeCameraInputForVisualSearch,!1),p=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.dVSOC,!1),w=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.aimgut,!1),v=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.visualSearchSubscriptionId,""),b=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.eifpiab,!1),k=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.emwc,!1),d=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.eufte,!1),g=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.ecambar,!1),nt=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.eaddimgbar,!1),tt=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.eaddimgicon,!1);y&&(CIB.config.features.enableCameraInputForVisualSearch=!1);p&&(CIB.config.features.enableVisualSearchOrientationCheck=!1);CIB.config.features.enableVisualSearch=a;CIB.config.features.enableImageFilePasteInActionBar=b;CIB.config.features.enableUnsupportedFileTypeError=d;CIB.config.visualSearch.allowImageOnlyUserTurn=w;CIB.config.visualSearch.enableMobileWebCamera=k;CIB.config.visualSearch.enableCameraInActionBar=g;CIB.config.visualSearch.enableAttachImageInActionBar=nt;CIB.config.visualSearch.useImageAddIcon=tt;CIB.config.visualSearch.includeCredentialInXHRRequest=!0;!v||(CIB.config.visualSearch.subscriptionId=v);ou();su();hu()}}function ou(){var i,n=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.visualSearchRestrictedTonesList,null);(n===null||n===void 0?void 0:n.length)>0&&CIB.config.visualSearch&&(CIB.config.visualSearch.restrictedTones=[],n.forEach(function(n){CIB.config.visualSearch.restrictedTones.push(n.value)}))}function su(){var i,n=CIB.config.visualSearch,t;((i=_w._sydConvConfig)===null||i===void 0?void 0:i.evssid)&&n&&(t=sj_cook===null||sj_cook===void 0?void 0:sj_cook.get("_SS","SID"),t&&(n.query?n.query.SID=t:n.query={SID:t}))}function hu(){var n,i,r,f=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.evscamprd,!1),u=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.vscamprdname,"");f&&u&&((r=_w.SydneyCameraProviderFactory)===null||r===void 0?void 0:r.create(u))}function cu(){var n,i,r,u,f=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableFixCodeXAsBug,!1),e=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableStableAutosuggestion,!1),o=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableEndpointInASTelemetry,!1),s=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableAutosuggestMetrics,!1);f&&(CIB.config.features.enableFixCodeXAsBug=f);e&&(CIB.config.features.enableStableAutosuggestion=e);o&&(CIB.config.features.enableEndpointInASTelemetry=o);s&&(CIB.config.features.enableAutosuggestMetrics=s)}function lu(){var n,i,r,u,f,e,o,s,h,c=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableFileUpload,!1),l=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableFileUploadPrivacyMessage,!1),a=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableMobileFileUpload,!1),v=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableFileUploadWebPageUrlInput,!1),y=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableFileUploadContextInThreads,!1),p=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableTextFilePasteInActionBar,!1),w=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableFileUploadLongContext,!1),b=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableFileUploadForAllModes,!1),k=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableFileUploadDirect,!1);c&&(CIB.config.features.enableFileUpload=!0);l&&(CIB.config.features.enableFileUploadPrivacyMessage=!0);a&&(CIB.config.features.enableMobileFileUpload=!0);v&&(CIB.config.features.enableFileUploadWebPageUrlInput=!0);y&&(CIB.config.features.enableFileUploadContextInThreads=!0);p&&(CIB.config.features.enableTextFilePasteInActionBar=!0);w&&(CIB.config.features.enableFileUploadLongContext=!0);b&&(CIB.config.features.enableFileUploadForAllModes=!0);k&&(CIB.config.features.enableFileUploadDirect=!0)}function au(){var e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,rt=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableShareWholeThreadMockUp,!1),ut=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableThreadShareLandingPage,!1),ft=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableShareConversation,!1),et=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableShareThreadWithNoCache,!1),ot=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableWholeThreadPerformanceFix,!1),st=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableShareCurrentThreadMessagesfromAPI,!1),ht=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableThreadShareWithoutRenderCardRequest,!1),ct=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableGetConversationAPIWithSNRProxy,!1),lt=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.enableGetSharedMessagesAPIWithSNRProxy,!1),at=t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableBICHistory,!1),vt=t((w=_w._sydConvConfig)===null||w===void 0?void 0:w.enable2TScreenshot,!1),yt=t((b=_w._sydConvConfig)===null||b===void 0?void 0:b.enable2TScreenshotSnR,!1),it=t((k=_w._sydConvConfig)===null||k===void 0?void 0:k.enableThreads,!1),wt=t((d=_w._sydConvConfig)===null||d===void 0?void 0:d.enableThreadsCF,!1),bt=t((g=_w._sydConvConfig)===null||g===void 0?void 0:g.enableFlux3P,!1),n,i,pt;if(rt&&(CIB.config.features.enableShareWholeThreadMockUp=rt),ut&&(CIB.config.features.enableThreadShareLandingPage=ut),ft&&(CIB.config.features.enableShareConversation=ft),et&&(CIB.config.features.enableShareThreadWithNoCache=et),ot&&(CIB.config.features.enableWholeThreadPerformanceFix=ot),st&&(CIB.config.features.enableShareCurrentThreadMessagesfromAPI=st),ht&&(CIB.config.features.enableThreadShareWithoutRenderCardRequest=ht),ct&&(CIB.config.features.enableGetConversationAPIWithSNRProxy=ct),lt&&(CIB.config.features.enableGetSharedMessagesAPIWithSNRProxy=lt),at&&(CIB.config.features.enableBICHistory=at),vt&&(CIB.config.features.enableAnswerScreenshot=vt),yt&&(CIB.config.features.enableAnswerScreenshotSnR=yt),it){if(CIB.config.features.enableThreads=it,n=t((nt=_w._sydThreads)===null||nt===void 0?void 0:nt.threads,null),n&&n.length>0)for(i=0;i<n.length;i++)CIB.addThread(n[i]);pt=t((tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.threadsAutoSaveOptionset,"autosave");r(CIB.config.sydney.request.optionsSets,pt)}(it||wt)&&f(u.System,"THREADS","1","1");uu()}function vu(){var n,i,r,u=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableTypingIndicatorAnimation,!1),f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableTypingIndicatorDemoteStyle,!1),e=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.typingIndicatorAnimationDuration,cr);u&&(CIB.config.features.enableTypingIndicatorAnimation=!0,CIB.config.messaging.typingIndicatorAnimationDuration=e);f&&(CIB.config.features.enableTypingIndicatorDemoteStyle=!0)}function yu(){var n,i,r,u,f,e,o,h=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableAdSlugsDesktop,!1),c=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableAdSlugsMobile,!1),l=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSearchQueryForInlineAds,!1),a=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableDevFormOverrideForAds,!1),v=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableFixForInlineAdsSQ,!1),s=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.codexPartnerScenario,""),y=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableInlineAdsDynamicWidth,!1);h&&(CIB.config.features.enableAdSlugsDesktop=!0);c&&(CIB.config.features.enableAdSlugsMobile=!0);l&&(CIB.config.features.enableSearchQueryForInlineAds=!0);a&&(CIB.config.features.enableDevFormOverrideForAds=!0);v&&(CIB.config.features.enableFixForInlineAdsSQ=!0);s!==""&&(CIB.config.sydney.request.scenario=s);y&&(CIB.config.features.enableInlineAdsDynamicWidth=!0)}function pu(){var n,i,r,u,f,e,o,s=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableSydneySapphireUpsellMessageActions,!1),h=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydneySapphireUpsellEndOfChat,!1),c=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSydneySapphireUpsellVisualSearch,!1),l=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.sydneySapphireUpsellTreatment,0),a=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.isAccountLinkedWithActiveAAD,!1),v=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.sydneyContinueOnPhoneShortenQRCodeUrl,"https://bingapp.microsoft.com/bing?style=newbing"),y=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.sydSapphireUpsellVisualSearchQRCodeUrl,"https://bingapp.microsoft.com/bing?adjust=13uz7blz_13evwnmy");s&&!a&&(CIB.config.features.enableSydSapphireUpsellOnMessageActions=s,CIB.config.mobileUpsell.sydSapphireUpsellTreatment=l,CIB.config.mobileUpsell.qrCodeBaseUrl=v);h&&(CIB.config.features.enableSydSapphireUpsellOnEndOfChat=h,CIB.config.mobileUpsell.sydSapphireUpsellTreatment=l);c&&(CIB.config.features.enableSydSapphireUpsellVisualSearch=c,CIB.config.mobileUpsell.qrCodeVisualSearchUrl=y)}function wu(){var i,r,u,f,e,o,s,l=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.sydOptionSets,!1),a=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.isSydCorpnet,!1),v=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.noInitOpts,!1),y=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.extraSappOptions,""),p=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.extraEdgeOptions,""),w=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.extraBceOptions,""),k=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.removeDeepleo,!1),d=new URLSearchParams(_w.location.search.toLowerCase()),b=d.get(tr.toLowerCase()),n,c;(v||l!=""||a&&b||y||p||w)&&(n=v?[]:CIB.config.sydney.request.optionsSets,n=h(n,l),a&&(n=h(n,b)),n=h(n,y),n=h(n,p),n=h(n,w),k&&(c=n.indexOf("deepleo"),c>=0&&n.splice(c,1)),CIB.config.sydney.request.optionsSets=n)}function bu(){var h,l,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,ii=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.toneDefault,n.BALANCED_TONE),ri=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableToneCook,!1),ui=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableBalDefault,!1),fi=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.userPriorityLevel,999),ei=t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableUserPriorityLevel,!1),bt=t((w=_w._sydConvConfig)===null||w===void 0?void 0:w.enableTonePerf,!1),oi=t((b=_w._sydConvConfig)===null||b===void 0?void 0:b.enableCreativeToneIgnoreAndDefaultToBalanced,!1),si=t((k=_w._sydConvConfig)===null||k===void 0?void 0:k.enablePreciseToneIgnoreAndDefaultToBalanced,!1),wt,ni,ti;c=t((d=_w._sydConvConfig)===null||d===void 0?void 0:d.enableNoToneOpt,!1);((g=_w._sydConvConfig)===null||g===void 0?void 0:g.shareLoadingUI)&&(CIB.config.features.enableShareLoadingUI=!0);var u=!ei||fi>0,vt=u?t((nt=_w._sydConvConfig)===null||nt===void 0?void 0:nt.balTone,""):"harmonyv3",yt=t((tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.crtTone,""),pt=t((it=_w._sydConvConfig)===null||it===void 0?void 0:it.prcTone,""),kt=t((rt=_w._sydConvConfig)===null||rt===void 0?void 0:rt.sydBalOpts,""),dt=t((ut=_w._sydConvConfig)===null||ut===void 0?void 0:ut.sydCrtOpts,""),gt=t((ft=_w._sydConvConfig)===null||ft===void 0?void 0:ft.sydPrcOpts,""),f=u?t((et=_w._sydConvConfig)===null||et===void 0?void 0:et.sydBalExtraOpts,""):"",e=u?t((ot=_w._sydConvConfig)===null||ot===void 0?void 0:ot.sydCrtExtraOpts,""):"",s=u?t((st=_w._sydConvConfig)===null||st===void 0?void 0:st.sydPrcExtraOpts,""):"";kt&&(f+=(f!==""?",":"")+kt);dt&&(e+=(e!==""?",":"")+dt);gt&&(s+=(s!==""?",":"")+gt);f&&(o.Balanced=f.split(","));e&&(o.Creative=e.split(","));s&&(o.Precise=s.split(","));(vt||c&&vt=="")&&(i[n.BALANCED_TONE]=vt);(yt||c&&yt=="")&&(i[n.CREATIVE_TONE]=yt);(pt||c&&pt=="")&&(i[n.PRECISE_TONE]=pt);bt&&(CIB.config.features.enableTonePerf=bt);CIB.config.features.enableResponseToneSelector=!0;CIB.config.features.enablePersistentResponseToneSelector=t((ht=_w._sydConvConfig)===null||ht===void 0?void 0:ht.enablePersistentToneSelector,!1);CIB.config.features.enableResponseToneObjects=(lt=(ct=_w._sydConvConfig)===null||ct===void 0?void 0:ct.enableSuppressTones)!==null&&lt!==void 0?lt:!1;CIB.config.features.enableResponseToneColorThemes=!0;wt=Object.keys(i);((at=_w._sydConvConfig)===null||at===void 0?void 0:at.enableSuppressTones)?CIB.config.sydney.responseTones=wt.map(function(n){var t,i,r=(i=(t=_w._sydConvConfig)===null||t===void 0?void 0:t["suppressKnob".concat(n)])!==null&&i!==void 0?i:0;return{tone:n,disabled:r}}):CIB.config.sydney.responseToneOptions=wt;ni=oi&&n.CREATIVE_TONE===a();ti=si&&n.PRECISE_TONE===a();ni||ti?ku():ri?uf(ii):ui&&r(CIB.config.sydney.request.optionsSets,i[n.BALANCED_TONE]);ef()}function ku(){CIB.config.sydney.request.optionsSets=v(CIB.config.sydney.request.optionsSets,n.BALANCED_TONE,CIB.responseTone);r(CIB.config.sydney.request.optionsSets,i[n.BALANCED_TONE]);CIB.responseTone=n.BALANCED_TONE;s=CIB.responseTone}function et(r){var f,e,o,s,h,c,l,a,v,u,y;if(t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableSyntheticStreamSpeedBasedOnTone,!1)&&(u=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.syntheticStreamSpeed,pt),r===n.BALANCED_TONE&&(CIB.config.messaging.messageBufferWorkerStreamDelayMS=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.syntheticStreamSpeedForBalancedTone,u)),r===n.CREATIVE_TONE&&(CIB.config.messaging.messageBufferWorkerStreamDelayMS=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.syntheticStreamSpeedForCreativeTone,u)),r===n.PRECISE_TONE&&(CIB.config.messaging.messageBufferWorkerStreamDelayMS=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.syntheticStreamSpeedForPreciseTone,u))),y=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableStreamSyntheticTextResponses,!1),y){var p=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableStreamSyntheticTextResponsesForBalancedTone,!1),w=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableStreamSyntheticTextResponsesForCreativeTone,!1),b=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableStreamSyntheticTextResponsesForPreciseTone,!1);if(p&&r===n.BALANCED_TONE&&i[n.BALANCED_TONE]==="galileo"){CIB.config.messaging.streamSyntheticTextResponses=!0;return}if(w&&r===n.CREATIVE_TONE&&i[n.CREATIVE_TONE]==="h3imaginative"){CIB.config.messaging.streamSyntheticTextResponses=!0;return}if(b&&r===n.PRECISE_TONE&&i[n.PRECISE_TONE]==="h3precise"){CIB.config.messaging.streamSyntheticTextResponses=!0;return}CIB.config.messaging.streamSyntheticTextResponses=!1}}function du(n){if(!n)return tt.Demote;for(var t in tt)if(t.toLowerCase().trim()===n.toLowerCase().trim())return tt[t];return tt.Demote}function gu(){var t=sj_cook.get(n.userCook,wr),i=du(t);CIB.config.sydney.bingFirstPageAdultFilter=i}function ci(){var t=sj_cook.get(n.userCook,l),i;return g?!!t||ut&&!!sj_cook.get(dt,l):(i=sj_cook.get(w,w),t===i)}function nf(){var t,i,r,e,o,s,h,c,v=sj_cook.get(w,w),a,y;sj_cook.set(n.userCook,l,v,!0,"/",null);ut&&sj_cook.set(dt,l,v,!0,"/",null);f(u.System,"MuidConsentProvided","MuidUser",{IsConsent:"1"});CIB.config.sydney.muidUserConsentGiven=!0;CIB.config.features.enableSuggestionBarInUnexpandedChatAnswer&&(a=(r=(i=(t=_d.querySelector(".b_ans #b_sydTigerCont"))===null||t===void 0?void 0:t.querySelector("cib-serp"))===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.querySelector("cib-see-more-container"),y=(c=(h=(s=(o=(e=_d.querySelector(".b_ans #b_sydTigerCont"))===null||e===void 0?void 0:e.querySelector("cib-serp"))===null||o===void 0?void 0:o.shadowRoot)===null||s===void 0?void 0:s.querySelector("cib-conversation"))===null||h===void 0?void 0:h.shadowRoot)===null||c===void 0?void 0:c.querySelector("cib-suggestion-bar"),a&&y&&a.setAttribute("has-suggestions","true"))}function tf(){if(typeof CIB.version!="undefined"&&CIB.version&&CIB.version.version&&typeof sj_cook!="undefined"&&sj_cook){var t=CIB.version.version,i=sj_cook.get(n.userCook,gt);i&&i===t||(sj_cook.set(n.userCook,gt,t,!0,"/",null),f(u.System,"CIB","CIBInfo",{version:t}))}}function rf(){var n,i=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.DedicatedIpType,"unknown");["nochat","nochatstrict"].indexOf(i)>-1&&f(u.System,"NoChatVariant","NoChatVariantInfo",{DedicatedIpType:i})}function a(){var i,r=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableToneCookExpiry,!1),u=r?n.toneCook:n.userCook;return sj_cook.get(u,n.toneCrumb)}function uf(e){var h,c,l,y,w,d=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableToneCookExpiry,!1),b=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableBalancedSerp,!1),tt=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableAlwaysCreativeSerp,!1),it=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.enableSuperOptionsSets,!1),rt=t((w=_w._sydConvConfig)===null||w===void 0?void 0:w.enableBalancedSerpLog,!1),o=a(),k,g;if(rt&&o!=n.BALANCED_TONE&&f(u.System,"BalSerpOverride","Tone",{tone:o}),sf()){k=ot(wt).toLowerCase().trim();CIB.responseTone=nt[k];st(CIB.responseTone,!1,d);f(u.System,"SET_TONE_FROM_URL",k,"");f(u.System,p,"Tone",{tone:CIB.responseTone});return}tt?(o=n.CREATIVE_TONE,CIB.responseTone=o):!b&&o!=null&&i.hasOwnProperty(o)?(CIB.responseTone=o,f(u.System,p,"Tone",{tone:o})):(d&&(g=sj_cook.get(n.userCook,n.hasSetToneCrumb),g=="1"&&(sj_cook.set(n.userCook,n.hasSetToneCrumb,"0",!0,"/",null),f(u.System,"ResetTone","Tone",{}))),CIB.responseTone=e,o=e,f(u.System,"DefaultTone","Tone",{tone:o}));it&&r(CIB.config.sydney.request.optionsSets,lr);ft=CIB.config.sydney.request.optionsSets.length;!b&&i.hasOwnProperty(o)?(r(CIB.config.sydney.request.optionsSets,i[o]),CIB.config.sydney.request.optionsSets=v(CIB.config.sydney.request.optionsSets,o),s=o,et(s)):b&&i.hasOwnProperty(n.BALANCED_TONE)&&(r(CIB.config.sydney.request.optionsSets,i[n.BALANCED_TONE]),CIB.config.sydney.request.optionsSets=v(CIB.config.sydney.request.optionsSets,n.BALANCED_TONE),s=n.BALANCED_TONE,et(n.BALANCED_TONE))}function ff(n){var i,r=n&&n.length>1?n[1]:null,e=r?r.toLowerCase().trim():"",o,s;r&&nt.hasOwnProperty(e)&&(o=n&&n.length>2?n[2]:!1,s=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableToneCookExpiry,!1),CIB.responseTone=nt[e],st(CIB.responseTone,o,s),f(u.System,p,"Tone",{tone:CIB.responseTone}))}function ef(){var n,i,r,u;if(sj_evt.bind(yr,ff,!0),r=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableToneCookExpiry,!1),u=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.isCompliantSydneyEndpointEnabled,!1),!u&&CIB.onResponseToneChanged)CIB.onResponseToneChanged(function(n){st(n,!0,r)})}function ot(n){var i=_w.location.search,r=new URLSearchParams(i),t=r.get(n);return t?t:""}function sf(){var n,r=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableSetToneFromUrl,!1),i;return r?(i=ot(wt),i&&nt.hasOwnProperty(i.toLowerCase().trim())):!1}function st(t,u,f){var l=[i[t]].concat(o[t]).toString(),h,e;t!==a()&&ai("ChangedTone","Tone",{newTone:t});u&&(f?(h=cf(),sj_cook.set(n.toneCook,n.toneCrumb,t,!0,"/",h),sj_cook.set(n.toneCook,n.toneOptsCrumb,l,!0,"/",h),sj_cook.set(n.userCook,n.hasSetToneCrumb,"1",!0,"/",null)):(sj_cook.set(n.userCook,n.toneCrumb,t,!0,"/",null),sj_cook.set(n.userCook,n.toneOptsCrumb,l,!0,"/",null)));i.hasOwnProperty(t)&&(e=li(CIB.config.sydney.request.optionsSets,Object.keys(i)),e!==-1?c&&i[t]===""?(ft=e,CIB.config.sydney.request.optionsSets.splice(e,1)):CIB.config.sydney.request.optionsSets[e]=i[t]:c?r(CIB.config.sydney.request.optionsSets,i[t],ft):r(CIB.config.sydney.request.optionsSets,i[t]),CIB.config.sydney.request.optionsSets=v(CIB.config.sydney.request.optionsSets,t,s),s=t,et(s))}function hf(){var r,f,e,o=n.getConfigOrDefault((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableBalancedSerp,!1),t,i,s;o&&!ri&&(ri=!0,o&&(t=n.getCookieTone(),t!=null&&t!=n.BALANCED_TONE&&(i=CIB.manager.conversation._lastMessage,s=(e=(f=CIB===null||CIB===void 0?void 0:CIB.config)===null||f===void 0?void 0:f.greeting)===null||e===void 0?void 0:e.shouldSendBotGreeting,CIB.config.greeting.shouldSendBotGreeting=!1,n.shouldResetBotGreeting=!1,CIB.responseTone=t,n.lastQuery="",i&&i.text&&CIB.registerContext([{author:"bot",source:"serpBalResp",text:i.text}]),n.shouldResetBotGreeting=!0,CIB.config.greeting.shouldSendBotGreeting=s,n.SydLog(u.System,"SetCookToneAfterSERP","Tone",{tone:t}))))}function cf(){var n=new Date;return n.setDate(n.getDate()+(n.getHours()<2?1:2)),n.setHours(2),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),(n.getTime()-(new Date).getTime())/6e4}function v(n,t,i){return i===void 0&&(i=""),i!=""&&o.hasOwnProperty(i)&&(n=af(n,o[i])),t!=""&&o.hasOwnProperty(t)&&o[t].forEach(function(t){r(n,t)}),n}function r(n,t,i){i===void 0&&(i=-1);t&&n.indexOf(t)<0&&(i<0?n.push(t):n.splice(i,0,t))}function lf(n,t){var i=n.indexOf(t);i>=0&&n.splice(i,1)}function af(n,t){return t.forEach(function(t){var i=n.indexOf(t);i>=0&&n.splice(i,1)}),n}function li(n,t){for(var f,u,r=0;r<t.length;r++)if(f=t[r],u=n.indexOf(i[f]),u>=0)return u;return-1}function ht(n,t){var i={};return t?n.locType&&(i.LocationType=n.locType):n.accuracy&&(i.Accuracy=n.accuracy),n.state&&(i.State=decodeURI(n.state)),n.city&&(i.City=decodeURI(n.city)),n.lat&&n.long&&(i.Center={Latitude:parseFloat(n.lat),Longitude:parseFloat(n.long)}),n.source&&(i.LocationSource=n.source),n.altitude&&(i.Altitude=n.altitude),n.altitudeAcc&&(i.AltitudeAccuracy=n.altitudeAcc),n.displayName&&(i.DisplayName=n.displayName),n.name&&(i.Name=n.name),n.heading&&(i.Heading=n.heading),n.isValidLocation&&(i.IsValidLocation=n.isValidLocation),n.range&&(i.Radius=n.range),n.speed&&(i.Speed=n.speed),n.ts&&(i.Timestamp=n.ts),n.ets&&(i.ExpiryTimestamp=n.ets),i}function vf(){var t=(new Date).getTimezoneOffset(),r=Math.floor(Math.abs(t/60)),u=Math.abs(t%60),i;t<0?i="+"+e(r)+":"+e(u):t>0?i="-"+e(r)+":"+e(u):t==0&&(i="Z");var n=new Date,f=n.getDate(),o=n.getMonth()+1,s=n.getFullYear(),h=n.getHours(),c=n.getMinutes(),l=n.getSeconds();return e(s)+"-"+e(o)+"-"+e(f)+"T"+e(h)+":"+e(c)+":"+e(l)+i}function e(n){return n<10?"0"+n:n}function h(n,t){if(t){var i=t.split(",");return n.concat(i)}return n}function t(n,t){return typeof n!="undefined"?n:t}function yf(n){var t=__spreadArray([],CIB.config.sydney.request.optionsSets,!0),r;return i.hasOwnProperty(n)&&(r=li(t,Object.keys(i)),r!==-1&&(t[r]=i[n]),t=v(t,n,s)),t}function f(n,i,r,u){var e,o,s,h,f=[],l=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.isCompliantSydneyEndpointEnabled,!1),c,a,v;l&&f.push("IsBizChat",l.toString());c=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.isBingChatForEnterprise,!1);c&&f.push("IsBCE",c.toString());a=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.isBingChatForFaculty,!1);a&&f.push("IsBCSFaculty","true");v=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableTelemetryPrivacy,!1);v&&(u=pf(u));Log.Log.apply(Log,__spreadArray([n,"Codex",i,!1,"Namespace",r,"CustomData",JSON.stringify(u)],f,!1))}function pf(n){return dr.forEach(function(t){var i,r;n[t]!==undefined&&(n[t]=rt);((i=n.CustomData)===null||i===void 0?void 0:i[t])!==undefined&&(n.CustomData[t]=rt);((r=n.EncryptedData)===null||r===void 0?void 0:r[t])!==undefined&&(n.EncryptedData[t]=rt)}),n}function ai(n,t,i){f(u.Interaction,n,t,i)}function wf(){if(history&&(n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search}),sj_be(_w,"popstate",function(i){var u,f,e,o,s,h,r;if(n.enableConvModeSwitchAjax=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableConvModeSwitchAjax,!1),n.enableConvModeSwitchAjax&&(r=_w._currentRoute,_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search},lt(r===null||r===void 0?void 0:r.search)!=lt((f=_w._currentRoute)===null||f===void 0?void 0:f.search)&&(_w._isConvAjaxUpdated||((o=(e=_w._currentRoute)===null||e===void 0?void 0:e.state)===null||o===void 0?void 0:o.ajaxserp)===!0))){var c=_w.location,l=c.href,a=l.indexOf("/search");if(a>=0){window.location.reload();return}}((s=i===null||i===void 0?void 0:i.state)===null||s===void 0?void 0:s.inConvMode)&&_G[n.SYD_MODE]=="serp"?sj_evt.fire("showSydFSC",null,null,!1,!0):((h=i===null||i===void 0?void 0:i.state)===null||h===void 0?void 0:h.inConvMode)||_G[n.SYD_MODE]!="conversation"||(sj_evt.fire("preHideSydFSCByHistory"),sj_evt.fire("hideSydFSC",!0))}),URLSearchParams)){var i=new URLSearchParams(window.location.search);ti=i.get("showconv")==="1"}}function bf(i){var r,e;if(history){if(ti&&ii&&i){ii=!1;history.replaceState({inConvMode:i},document.title||"");n.enableConvModeSwitchAjax=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableConvModeSwitchAjax,!1);f(u.System,"SydHistory","replace",{enableConvModeSwitchAjax:n.enableConvModeSwitchAjax,showconv:i});n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search});return}ni?vi(i):(history.pushState({inConvMode:i},document.title||""),n.enableConvModeSwitchAjax=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableConvModeSwitchAjax,!1),f(u.System,"SydHistory","push",{enableConvModeSwitchAjax:n.enableConvModeSwitchAjax,showconv:i}),n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search}))}}function vi(i){var r,e=new URL(window.location.href);e.searchParams.set("showconv",i?"1":"0");history.pushState({inConvMode:i},yi(i),e);n.enableConvModeSwitchAjax=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableConvModeSwitchAjax,!1);f(u.System,"SydHistory","push",{enableConvModeSwitchAjax:n.enableConvModeSwitchAjax,showconv:i,Paramflag:1});n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search})}function yi(n){return k&&d?n?k:d:document.title}function kf(n){k&&d&&(document.title=yi(n))}function df(){var t,n;((t=history===null||history===void 0?void 0:history.state)===null||t===void 0?void 0:t.inConvMode)&&(n=_ge("sb_form_q"),n&&n.value?sj_evt.fire("showSydFSC",n.value):sj_evt.fire("showSydFSC"))}function gf(){function w(n){if(n&&n.length>=2){var t=n[1].waitlist;t&&t=="2"&&(CIB.config.features.enableMUIDUserMode=!1,CIB.config.messaging.maxTurnsPerConversation=ut,sj_evt.unbind("rewready",w))}}var i,r,u,f,e,o,s,h,c,l,g=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydTigerAns,!1),nt=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSydAjaxReset,!1),y,p,a,k,d,v;CIB.onModeChanged(function(t){switch(t){case"conversation":sj_evt.fire("showSydFSC");break;case"off-stage":if(n.ignoreFirstOffStage){n.ignoreFirstOffStage=!1;CIB.showConversation();break}sj_evt.fire("hideSydFSC");break;default:Log.Log("ClientInst","Codex","ModeChangeError",!1,"CustomData",JSON.stringify({mode:t}))}});if(g&&(y=_ge("b_sydTigerCont"),y)){p=_d.querySelector("#b_pole #b_sydTigerCont")!=null;CIB.onSerpSlotSuggestionInvoked(function(){_G[n.SYD_MODE]!="conversation"&&(n.LogIntEvent("ConversationViewEnter",p?"Pole":"RightRail",{source:"ChatBubble"}),sj_evt.fire("showSydFSC"))});a=_ge("sb_form_q");a&&(CIB.config.sydney.slottedModeTurnIndex=nr()&&((e=(f=(u=CIB===null||CIB===void 0?void 0:CIB.vm)===null||u===void 0?void 0:u.conversation)===null||f===void 0?void 0:f.turns)===null||e===void 0?void 0:e.length)?Math.max(CIB.vm.conversation.turns.length-1,0):0,n.lastQuery=a.value.toLowerCase().trim())}nt&&sj_evt.bind("ajax.unload",function(){var n,t,i,r,u,f,e,o,s,h,c;CIB&&(c=(t=(n=CIB===null||CIB===void 0?void 0:CIB.config)===null||n===void 0?void 0:n.greeting)===null||t===void 0?void 0:t.shouldSendBotGreeting,CIB.config.greeting.shouldSendBotGreeting=!1,(u=(r=(i=CIB===null||CIB===void 0?void 0:CIB.manager)===null||i===void 0?void 0:i.stream)===null||r===void 0?void 0:r.subscription)===null||u===void 0?void 0:u.dispose(),(e=(f=CIB===null||CIB===void 0?void 0:CIB.manager)===null||f===void 0?void 0:f.stream)===null||e===void 0?void 0:e.complete(),(s=(o=CIB===null||CIB===void 0?void 0:CIB.manager)===null||o===void 0?void 0:o.stream)===null||s===void 0?void 0:s.finalizeStreamSubscription(),(h=CIB===null||CIB===void 0?void 0:CIB.manager)===null||h===void 0?void 0:h.resetConversation(),CIB.config.greeting.shouldSendBotGreeting=c)});var tt=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.codexMUIDUser,!1),rt=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableSigninTurnFix,!0),ut=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.maxTurnsPerConversation,it);if(tt&&rt&&sj_evt.bind("rewready",w,!0),CIB.onModalVisibilityChanged)CIB.onModalVisibilityChanged(function(n){var i=_ge("b_header"),t=_ge("b_sydConvCont");i&&(n?(Lib.CssClass.add(i,b),t&&Lib.CssClass.add(t,b)):(Lib.CssClass.remove(i,b),t&&Lib.CssClass.remove(t,b)))});k=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableThreads,!1);d=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.isAccountLinkedWithActiveAAD,!1);!k&&d&&(v=_qs("body"),v&&Lib.CssClass.add(v,gr))}function ne(){var t,i,r,u,f,e,o,s,h,l=(r=(i=(t=CIB===null||CIB===void 0?void 0:CIB.vm)===null||t===void 0?void 0:t.conversation)===null||i===void 0?void 0:i.model)===null||r===void 0?void 0:r.suggestions,n=document.activeElement,c;return!l||!n||n.nodeName!=="CIB-SERP"?"":(n=(s=(o=(e=(f=(u=n===null||n===void 0?void 0:n.shadowRoot)===null||u===void 0?void 0:u.activeElement)===null||f===void 0?void 0:f.shadowRoot)===null||e===void 0?void 0:e.activeElement)===null||o===void 0?void 0:o.shadowRoot)===null||s===void 0?void 0:s.activeElement,!n||n.nodeName!=="CIB-SUGGESTION-ITEM")?"":(n=(h=n===null||n===void 0?void 0:n.shadowRoot)===null||h===void 0?void 0:h.activeElement,!n||n.nodeName!=="BUTTON"||!n.textContent)?"":(c=n.textContent.trim(),l.find(function(n){return n.text===c}))?c:""}function ct(n){var t=_ge(n);t&&t.parentElement&&t.parentElement.removeChild(t)}function te(n){CIB.processCachedResponse(n)}function pi(n,t,i,r,u,f,e){n===void 0&&(n="");t===void 0&&(t="");i===void 0&&(i="");r===void 0&&(r="");u===void 0&&(u=!1);f===void 0&&(f=!1);e===void 0&&(e=!1);sj_evt.fire("showSydFSC",n,t,r,u,i,f,e)}function lt(n){var r=new RegExp("[?&]{1}q=([^&]+)"),t=n.match(r),i=t?t[1]:null;return i?decodeURIComponent(i.replace("+"," ")):""}function y(){var i,r,u,e=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.isSapphireClient,!1),f,n;return e?lt(_w.location.search):(f=typeof sj_b!="undefined"&&sj_b!=null?sj_b:_d.body,n=f.querySelectorAll("textarea.b_searchbox, input.b_searchbox:not(#uaseabox)"),!n||n.length<=0)?"":(u=(r=n[0])===null||r===void 0?void 0:r.getAttribute("value"))!==null&&u!==void 0?u:""}function ie(){var t=new URLSearchParams(_w.location.search),i=t.get(bt);i&&(n.lastQuery=y().toLowerCase().trim())}function wi(n,t,i,r,u,f){var o,e,s;t===void 0&&(t=!1);i===void 0&&(i="");r===void 0&&(r="");u===void 0&&(u=!1);f===void 0&&(f=!1);o="";t&&(o=y());e=i;e||(s=_d.querySelector(".b_ans #b_wpt_data"),s&&(e=s.getAttribute("data-sydctx")));pi(n,e,o,r,!1,u,f)}function re(n,t){n===void 0&&(n="");t===void 0&&(t="");var i=y();wi(i,!1,n,t,!1,!0)}function ue(t){n.isSydFSCEligible=t}function fe(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t]}function ee(){sj_evt.fire("clarity.trigger","cibChat")}function oe(n,t,i){return!n||t&&(!i||i.toLowerCase().trim()!==y().toLowerCase().trim())}function se(t,i){var l,a,v,y,p,w,b,k,it,o,d,u,e,s,tt,ht,h,lt,r,c,at,pt,wt,bt;i===void 0&&(i=!1);it=n.getConfigOrDefault((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableSydCarouselHistory,!1);bi();var f=sj_ce("div","b_metaCont"),rt=sj_ce("div","b_metaCont_Title"),kt=n.getConfigOrDefault((a=_w._sydConvTranslation)===null||a===void 0?void 0:a.sydneyCarouselTitle,"");rt.textContent=kt;f.appendChild(rt);o=sj_ce("div","b_meta_bot");f.appendChild(o);d=sj_ce("div","b_metaChat");u=sj_ce("div","b_metaCont_PillCont","b_meta_hideEx");i?u.appendChild(d):o.appendChild(d);o.appendChild(u);var ut=n.getConfigOrDefault((v=_w._sydConvConfig)===null||v===void 0?void 0:v.carouselQueries,""),dt=n.getConfigOrDefault((y=_w._sydConvConfig)===null||y===void 0?void 0:y.sydCarPropQuery,!1),ft=ut?ut.split(","):null,g=ft?ft:CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text&&n.text!="Generating answers for you..."}).map(function(n){var i,r,t=(r=(i=n.text)===null||i===void 0?void 0:i.split("`"))!==null&&r!==void 0?r:[];return t.length==1?t[0]:t.length==3?t[1]:""}).filter(function(n){return n}),et=0,gt=i?_w.innerWidth-vt-or:er,ni=_w.innerWidth-vt-yt,ot=!i,st=gt-yt,ti=CIB.vm.conversation.model._id,nt=!0;for(e=g.length-1;e>=0;e--)s=g[e],nt&&(tt=he(s)+2*sr+hr,et+tt<st?et+=tt:ot?(nt=!1,ht=e+1,h=sj_ce("div","b_meta_exp","b_metaCont_Pill"),h.innerText="+"+ht.toString(),sj_be(h,"click",function(){Lib.CssClass.add(u,"b_metaExpanded")}),u.append(h)):(st=ni,ot=!0)),lt="cdxche",r=sj_ce("a",null,"b_metaCont_Pill"+(nt?"":" b_hide")),r.href=_w.location.origin+_w.location.pathname+"?q="+s+"&form="+lt,it&&(r.href=r.href+"&convid="+ti),dt&&(r.href=r.href+"&features=sydcarousel,sydcpropq"),r.textContent=s,r.target="_blank",sj_be(r,"click",function(t){var r=_ge("CodexCarouselInstLink"),i;_w.si_ct&&_w.si_ct(r);i=t===null||t===void 0?void 0:t.target;n.LogIntEvent("QueryCarouselClick","QueryCarousel",{query:i===null||i===void 0?void 0:i.textContent})}),u.appendChild(r);c=sj_ce("div","b_meta_col","b_metaCont_Pill b_hide");c.innerText=n.getConfigOrDefault((p=_w._sydConvTranslation)===null||p===void 0?void 0:p.sydneyCarouselCollapse,"Collapse");sj_be(c,"click",function(){Lib.CssClass.remove(u,"b_metaExpanded")});u.append(c);g.length>0&&(at=n.getConfigOrDefault((w=_w._sydConvConfig)===null||w===void 0?void 0:w.suppressAlsoTryWhenEnableSydCarousel,!1),at&&ct("b_alsotry"),pt=n.getConfigOrDefault((b=_w._sydConvConfig)===null||b===void 0?void 0:b.suppressPoleRSWhenEnableSydCarousel,!1),pt&&ct("brspole"),wt=n.getConfigOrDefault((k=_w._sydConvConfig)===null||k===void 0?void 0:k.suppressPoleRecommendedSearchWhenEnableSydCarousel,!1),wt&&ct("polerecommendedsearch"),t.children.length>0?(bt=_w.getComputedStyle(t,null),bt.paddingLeft=="0px"&&Lib.CssClass.add(f,"b_metaPadding"),t.insertBefore(f,t.children[0])):t.appendChild(f),sj_evt.fire(vr))}function he(n){var i=sj_ce("canvas"),t=i.getContext("2d");return t.font="14px Roboto",t.measureText(n).width}function bi(){var n=_ge("b_metaCont");n&&n.parentElement&&n.parentElement.removeChild(n)}function ki(){var n=ot(ar);return n!==null&&n!==void 0?n:""}function ce(){var n,t,i;((t=(n=CIB.config)===null||n===void 0?void 0:n.knowledgeCards)===null||t===void 0?void 0:t.query)&&(CIB.config.knowledgeCards.query.IG=_G.IG,CIB.config.knowledgeCards.query.IID=(i=_ge("b_sydConvCont"))===null||i===void 0?void 0:i.getAttribute("_iid"))}function at(n,i,r){var u,f,e,o,s,h,c,l,a,v=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.disable2TSearchHistory,!1),y=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enable2TTest,!1);((o=(e=CIB===null||CIB===void 0?void 0:CIB.config)===null||e===void 0?void 0:e.answers)===null||o===void 0?void 0:o.query)&&(CIB.config.answers.query.IG=_G.IG,CIB.config.answers.query.IID=(s=_ge("b_sydConvCont"))===null||s===void 0?void 0:s.getAttribute("_iid"),CIB.config.answers.query.cw=n,CIB.config.answers.query.ch=i,y&&(CIB.config.answers.query.features=ki()),v&&(CIB.config.answers.query.dissrchswrite="1"));((c=(h=CIB===null||CIB===void 0?void 0:CIB.config)===null||h===void 0?void 0:h.ads)===null||c===void 0?void 0:c.query)&&(CIB.config.ads.query.IG=_G.IG,CIB.config.ads.query.IID=r?(l=_ge("CodexAdsInstLink"))===null||l===void 0?void 0:l.getAttribute("_iid"):(a=_ge("b_sydConvCont"))===null||a===void 0?void 0:a.getAttribute("_iid"),CIB.config.ads.query.cw=n,CIB.config.ads.query.ch=i,y&&(CIB.config.ads.query.features=ki()),CIB.config.ads.query.form="codexx",v&&(CIB.config.ads.query.dissrchswrite="1"))}function di(t,i){var r,u;if(t)try{var f=ClientObserver?ClientObserver.getBrowserWidth():fi(),e=ClientObserver?ClientObserver.getBrowserHeight():ei(),r=f-n.padding2TMobile<n.MIN_WIDTH_MOBILE?n.MIN_WIDTH_MOBILE:f-n.padding2TMobile,u=e;at(r,u,i)}catch(o){Log.Log("CI.Error","SydneyMobile","ClientObserver not loaded")}else r=ClientObserver.getBrowserWidth(),u=ClientObserver.getBrowserHeight(),at(r,u,i)}function le(i){var r,u,f,e,o,h=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.bypassConsentCheck,!1),s=CIB.vm.conversation.model.messages.filter(function(n){return n.author=="user"}).length,c=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableCodexMuidConsentTop,!1),l=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableCodexMuidConsentExplicit,!1),a=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableCodexMuidConsentImplicit,!1),v=c||l||a,y=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.disableChatQueryForShowConv,!1);return!i||i==n.lastQuery||!ae()||i==n.firstQuery||v&&!ci()&&!(h||s<1)||y&&s>0}function ae(){var n,i,r=new URLSearchParams(_w.location.search),f=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.initialShowConvPresent,!1),e=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.disableChatQueryForShowConv,!1),o=r.get("showconv"),u=r.get("sendquery");return e?u==="1"||!f:u==="1"||o!=="1"}function ve(i,r,u,f){var h,c,l,v=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableSydContext,!1),y=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableSQMsg,!1),e,o,a,s;if(n.enableConvModeSwitchAjax=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableConvModeSwitchAjax,!1),!le(i)){if(f&&n.enableConvModeSwitchAjax){if(n.isSmoothConvSwitchUpdatedPage())return;try{if(e=CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text!="Generating answers for you..."||n.type==="text"&&n.author==="user"}),e&&e.length>0&&(o=e[e.length-1].text.split("`"),a=o.length==1?o[0]:o.length==3?o[1]:"",a.toLowerCase()==i.toLowerCase()))return}catch(p){}}s=[];u&&s.push({author:"user",text:u});r&&s.push({author:"bot",text:r});v&&s.length!=0&&CIB.registerContext(s);y&&f&&!CIB.manager.conversation._lastMessage&&!CIB.manager.conversation.messages.length?CIB.sendSearchQuery(i):CIB.addMessage(i);n.lastQuery=i;n.firstQuery.length==0&&(n.firstQuery=i)}}function gi(n,t,i){return i===void 0&&(i="POST"),new Promise(function(r,u){var f=sj_gx();f.onreadystatechange=function(){f.readyState===4&&(f.status===200?r(f):u(f))};f.onerror=function(){u(f)};f.open(i,n,!0);f.setRequestHeader("content-type","application/json");f.send(t)})}function ye(n){return gi(n,"","GET").then(function(n){return Promise.resolve(JSON.parse(n.response))})["catch"](function(n){return Promise.reject(n)})}function pe(n){var u,f,i,r;return n?(i=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.tigerEnhancedPromptTemplate,""),!i)?n:(i=i.replace("{0}",n),r=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.language,""),r&&r.indexOf("English")<0&&(i+=" Respond in language "+r),i):n}function nr(){var n,t=new URLSearchParams(_w===null||_w===void 0?void 0:_w.location.search);return t.has("form")&&((n=t.get("form"))===null||n===void 0?void 0:n.toLowerCase())==="convaj"&&_w._isConvAjaxUpdated}function we(){var n,t,i=(t=(n=_d.querySelector("cib-serp"))===null||n===void 0?void 0:n.shadowRoot)===null||t===void 0?void 0:t.querySelector("cib-background");i&&(i.style.height="100%",i.style.width="100%")}function be(){var n,t,i,r,u,f,e=(f=(u=(r=(i=(t=(n=_d.querySelector("cib-serp"))===null||n===void 0?void 0:n.shadowRoot)===null||t===void 0?void 0:t.querySelector("cib-conversation"))===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.querySelector("cib-welcome-container"))===null||u===void 0?void 0:u.shadowRoot)===null||f===void 0?void 0:f.querySelector(".muid-upsell");e&&(e.style.display="none")}var tr="sydneyOptionsSets",ir="codexFeatures",rr="speechSrOptions",bt,p;n.CREATIVE_TONE="Creative";n.BALANCED_TONE="Balanced";n.PRECISE_TONE="Precise";var it=5,ur=2,fr=2e3,er=750,vt=48,or=42,sr=16,hr=6,yt=60,pt=66,cr=1e3,lr="so_bing_chat",wt="seltone",ar="twoTFeatures",vr="SydAddCarousel";n.SYD_MODE="SydMode";n.SYD_PREV_MODE="SydPrevMode";n.lastQuery=(n===null||n===void 0?void 0:n.lastQuery)?n===null||n===void 0?void 0:n.lastQuery:"";n.firstQuery="";n.ignoreFirstOffStage=!1;n.shouldResetBotGreeting=!0;n.shouldForceSendBotGreeting=!1;bt="shareId";n.userCook="SRCHHPGUSR";n.toneCook="CDXTC";n.toneCrumb="cdxtone";n.toneOptsCrumb="cdxtoneopts";p="InitialTone";n.hasSetToneCrumb="cdxts";var yr="crtone",pr="cdxwinturn",wr="ADLT",w="MUID",kt="CMUID",br="VSRO",dt="BFBUSR",kr="CMUIDBCE",gt="CIBV",dr=["chips","query","searchQuery","text"],rt="<stripped/>",b="cdxModalVisible",gr="aad",k="",d="",ni=!1,ti=!1,ii=!0,l=kt,g=!1,ut=!1,u={System:"SystemEvent",Interaction:"InteractionEvent"},i={Creative:"h3imaginative",Balanced:"harmonyv3",Precise:"h3precise"},nt={c:"Creative",b:"Balanced",p:"Precise"},o={Creative:[],Balanced:[],Precise:[]},s="",ri=!1,c=!1,ft=-1,tt={Off:"1",Demote:"2",Strict:"4",KidSafe:"8",Stricter:"16",AdultOnly:"32"};n.isSydFSCEligible=n.isSydFSCEligible?n.isSydFSCEligible:!1;n.isConfigSet=!1;n.enableCreatorSendQueryWhenShowConvQuery=!0;n.padding2TMobile=92;n.MIN_WIDTH_MOBILE=288;n.enableConvModeSwitchAjax=!1;n.setConfigs=nu;n.setColorScheme=iu;n.getMobileBrowserWidth=fi;n.getMobileBrowserHeight=ei;n.getCookieTone=a;n.updateResponseToneAfterSerp=hf;n.addOptionSet=r;n.getConfigOrDefault=t;n.getAllowedToneOptionsSets=yf;n.SydLog=f;n.LogIntEvent=ai;n.setupHistory=wf;n.pushSydHistory=bf;n.updateConvFlagInURL=vi;n.updateConvPageTitle=kf;n.checkInitialState=df;n.setEventListeners=gf;n.getActiveSuggestionChipText=ne;n.processCachedResponseUsingCIB=te;n.triggerSydFSC=pi;n.getQuery=y;n.triggerShareFlow=ie;n.triggerSydFSCWithContext=wi;n.triggerSydFSCQueryWithContext=re;n.setSydFSCEligibleState=ue;n.sydPayWallTrace=fe;n.triggerClarity=ee;n.shouldMove1TAnswers=oe;n.addCarousel=se;n.removeQueries=bi;n.set2TQueryConfigs=at;n.retrieveClientWidthAndHeightAndSet2TQueryConfig=di;n.sendFirstQuery=ve;n.createRequest=gi;n.getJsonData=ye;n.createIntelligentQuery=pe;n.isSmoothConvSwitchUpdatedPage=nr;n.updateChatBackgroundWidth=we;n.hideSignInUpsellFor3P=be;sj_evt.fire("SydFSCHelperLoaded")})(SydFSCHelper||(SydFSCHelper={}))