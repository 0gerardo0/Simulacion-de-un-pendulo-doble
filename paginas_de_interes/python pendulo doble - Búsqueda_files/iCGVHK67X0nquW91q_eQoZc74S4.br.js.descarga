var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},SydneyFullScreenConv;(function(n){function sr(i){var r,c,v,y,b,k,nt,tt,it,et,ot,ht,vt,bt,ni,ri,ui,fi,li,sr,cr,ar,vr,yr,br,gr,nu,ru,fu,eu,ou,su,hu,cu,lu,au,vu,yu,nf,rf,ff,ef,sf,hf,cf,lf,af,vf,yf,pf,wf,bf,kf,df,gf,ne,te,ie,re,ue,fe;return i===void 0&&(i=null),__awaiter(this,void 0,void 0,function(){var oe,ke,de,ge,oo,so,le,no,ae,ve,to,io,ro,uo,ye,fo,pe,ee,he,se,we,be,ce,eo;return __generator(this,function(ho){switch(ho.label){case 0:if(oe=_ge(pr),oe.querySelector("cib-serp"))return[2];if(kt=(r=_w._sydConvConfig)===null||r===void 0?void 0:r.usePill,rt=(c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableScrollOut,dt=(v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableSydContext,o=(y=_w._sydConvConfig)===null||y===void 0?void 0:y.convBackBtn,ut=(b=_w._sydConvConfig)===null||b===void 0?void 0:b.enableSetConvQueryFlag,tu=(k=_w._sydConvConfig)===null||k===void 0?void 0:k.enableSydTigerAns,ei=(nt=_w._sydConvConfig)===null||nt===void 0?void 0:nt.enableSydAjax,st=(tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.enableSydCarousel,n.moveOnlySydXAnswers=(it=_w._sydConvConfig)===null||it===void 0?void 0:it.moveOnlySydXAnswers,s=(et=_w._sydConvConfig)===null||et===void 0?void 0:et.hideSydFSC,h=(ot=_w._sydConvConfig)===null||ot===void 0?void 0:ot.enableSydOverlay,gt=(ht=_w._sydConvConfig)===null||ht===void 0?void 0:ht.enable1TCibSlot,d=(vt=_w._sydConvConfig)===null||vt===void 0?void 0:vt.enableSydX1T,oi=(bt=_w._sydConvConfig)===null||bt===void 0?void 0:bt.hideSydMic,si=(ni=_w._sydConvConfig)===null||ni===void 0?void 0:ni.fromNoResults,pi=(ri=_w._sydConvConfig)===null||ri===void 0?void 0:ri.codexWinEnableCustomGreeting,wi=(ui=_w._sydConvConfig)===null||ui===void 0?void 0:ui.codexWinGreetingCustomString,ai=(fi=_w._sydConvConfig)===null||fi===void 0?void 0:fi.checkCreatorAnsFor1T,hi=SydFSCHelper.getConfigOrDefault((li=_w._sydConvConfig)===null||li===void 0?void 0:li.enableSydCarouselHistory,!1),iu=SydFSCHelper.getConfigOrDefault((sr=_w._sydConvConfig)===null||sr===void 0?void 0:sr.enableSQMsg,!1),ci=SydFSCHelper.getConfigOrDefault((cr=_w._sydConvConfig)===null||cr===void 0?void 0:cr.enableSemSerpNoCache,!1),vi=SydFSCHelper.getConfigOrDefault((ar=_w._sydConvConfig)===null||ar===void 0?void 0:ar.enableSydStaticAdsLink,!1),ke=SydFSCHelper.getConfigOrDefault((vr=_w._sydConvConfig)===null||vr===void 0?void 0:vr.hideSydReconnect,!1),de=(yr=_w._sydConvConfig)===null||yr===void 0?void 0:yr.enableDlBing,ge=(br=_w._sydConvConfig)===null||br===void 0?void 0:br.disableSydGhosting,oo=SydFSCHelper.getConfigOrDefault((gr=_w._sydConvConfig)===null||gr===void 0?void 0:gr.disableCibNotificationStyleUpdate,!1),so=_w._sydCachedString,le=_w._sydAddOptionsSet,_G[SydFSCHelper.SYD_MODE]="serp",_G[SydFSCHelper.SYD_PREV_MODE]="",ct=SydFSCHelper.getConfigOrDefault((nu=_w._sydConvConfig)===null||nu===void 0?void 0:nu.disableTabletScroll,!1),lt=SydFSCHelper.getConfigOrDefault((ru=_w._sydConvConfig)===null||ru===void 0?void 0:ru.disableTouchDesktopScroll,!1),at=SydFSCHelper.getConfigOrDefault((fu=_w._sydConvConfig)===null||fu===void 0?void 0:fu.disableDesktopScroll,!1),yi=SydFSCHelper.getConfigOrDefault((eu=_w._sydConvConfig)===null||eu===void 0?void 0:eu.enableChatScrollFix,!1),yt=SydFSCHelper.getConfigOrDefault((ou=_w._sydConvConfig)===null||ou===void 0?void 0:ou.enableConvModeSwitchAjax,!1),bi=SydFSCHelper.getConfigOrDefault((su=_w._sydConvConfig)===null||su===void 0?void 0:su.enableCssSplitConvModeOnClick,0),wt=SydFSCHelper.getConfigOrDefault((hu=_w._sydConvConfig)===null||hu===void 0?void 0:hu.chatBackgroundColorOverride,""),ti=SydFSCHelper.getConfigOrDefault((cu=_w._sydConvConfig)===null||cu===void 0?void 0:cu.enableWelcomeScreenV2,!1),ii=SydFSCHelper.getConfigOrDefault((lu=_w._sydConvConfig)===null||lu===void 0?void 0:lu.enableChatFRE,!1),ki=SydFSCHelper.getConfigOrDefault((au=_w._sydConvConfig)===null||au===void 0?void 0:au.enable2TQueryConfigsOnSerpLoad,!1),di=SydFSCHelper.getConfigOrDefault((vu=_w._sydConvConfig)===null||vu===void 0?void 0:vu.enableBackgroundFix,!1),gi=SydFSCHelper.getConfigOrDefault((yu=_w._sydConvConfig)===null||yu===void 0?void 0:yu.hideMuidUpsell,!1),nr=SydFSCHelper.getConfigOrDefault((nf=_w._sydConvConfig)===null||nf===void 0?void 0:nf.enableSERPHideShowConv,!1),tr=SydFSCHelper.getConfigOrDefault((rf=_w._sydConvConfig)===null||rf===void 0?void 0:rf.enableBceBcbToggle,!1),u=SydFSCHelper.getConfigOrDefault((ff=_w._sydConvConfig)===null||ff===void 0?void 0:ff.enableNotebookMode,!1),ir=SydFSCHelper.getConfigOrDefault((ef=_w._sydConvConfig)===null||ef===void 0?void 0:ef.extraNotebookOptionsSets,""),ur=SydFSCHelper.getConfigOrDefault((sf=_w._sydConvConfig)===null||sf===void 0?void 0:sf.maxMessageLength,kr),fr=SydFSCHelper.getConfigOrDefault((hf=_w._sydConvConfig)===null||hf===void 0?void 0:hf.notebookMaxMessageLength,dr),er=SydFSCHelper.getConfigOrDefault((cf=_w._sydConvConfig)===null||cf===void 0?void 0:cf.enableSydTestCache,!1),g=SydFSCHelper.getConfigOrDefault((lf=_w._sydConvConfig)===null||lf===void 0?void 0:lf.enableChatContAfterHeader,!1),or=SydFSCHelper.getConfigOrDefault((af=_w._sydConvConfig)===null||af===void 0?void 0:af.enableSafeChatAnsStyle,!1),no=SydFSCHelper.getConfigOrDefault((vf=_w._sydConvConfig)===null||vf===void 0?void 0:vf.isCopilotChat,!1),p=_d.createElement("slot"),p.setAttribute("name","firstAnswer"),p.setAttribute("slot","firstAns"),w=_d.createElement("slot"),w.setAttribute("name","firstAns"),f=((yf=_d.getElementsByClassName("b_top"))===null||yf===void 0?void 0:yf.length)>0?_d.getElementsByClassName("b_top")[0]:null,ft=!f?!1:f.getElementsByClassName("b_wpt_ch").length>0||f.getElementsByClassName("qna-sydney").length>0,g?oe&&Lib.CssClass.add(sj_b,wr):(ae=_ge("b_header"),oe&&ae&&sj_b.insertBefore(oe,ae)),t=_d.createElement("div"),t===null||t===void 0?void 0:t.setAttribute("slot","firstAnswer"),t===null||t===void 0?void 0:t.setAttribute("id","sydFirstAnswer"),t.style.maxWidth="648px",SydFSCHelper.setConfigs(i),SydFSCHelper.setEventListeners(),SydFSCHelper.setSydFSCEligibleState(!0),ve=SydFSCHelper.getConfigOrDefault((pf=_w._sydConvConfig)===null||pf===void 0?void 0:pf.isCompliantSydneyEndpointEnabled,!1),ve&&MsbSydneyHelper.setCompliantSydneyUrls(),e=CIB.insertAt(oe),SydFSCHelper.setColorScheme(),to=SydFSCHelper.getConfigOrDefault((wf=_w._sydConvConfig)===null||wf===void 0?void 0:wf.isBingChatForEnterprise,!1),io=to&&typeof BceSydneyHelper!="undefined"?BceSydneyHelper.getSydneyWelcomeCards:undefined,wt&&CIB.theme.addStyles("cib-background",CIB.theme.createStyles(':host([product="bing"][background-type="gradient"]) { background: #'+wt+" !important;}")),ti?sj_evt.bind("sydWelcomeScreen",function(){SydWelcomeScreen===null||SydWelcomeScreen===void 0?void 0:SydWelcomeScreen.setContent(e,io)},!0):ii&&(SydneyChatFRE===null||SydneyChatFRE===void 0?void 0:SydneyChatFRE.setContent(e)),ve&&MsbSydneyHelper.addTenantLogoToHeader(),ro=SydFSCHelper.getConfigOrDefault((bf=_w._sydConvConfig)===null||bf===void 0?void 0:bf.useAccountLinkingForConversationLimitUpsell,!1),ro&&(CIB.config.bing.signIn.query.action="acclink",CIB.config.bing.signIn.query.crea="MY04B",CIB.config.bing.signIn.query.pn="AccountLinking_Chat",CIB.config.bing.signIn.query.publ="BingIP"),e.setAttribute("alignment",no?"center":"left"),de&&CIB.config.sydney.request.optionsSets.push("dlbing"),le&&CIB.config.sydney.request.optionsSets.push(le),u&&(pt=(kf=CIB.config.sydney.request.optionsSets)===null||kf===void 0?void 0:kf.slice(0),rr=ir.split(",")),si)SydFSCHelper.lastQuery=SydFSCHelper.getQuery().toLowerCase().trim();else{CIB.config.greeting.shouldSendBotGreeting=SydFSCHelper.shouldForceSendBotGreeting;yt||(sj_evt.bind("ajax.unload",function(){SydFSCHelper.shouldResetBotGreeting=!1}),sj_evt.bind("ajax.load",function(){SydFSCHelper.shouldResetBotGreeting=!0}));CIB.onConversationRequestStateChange(function(n){n||CIB.config.greeting.shouldSendBotGreeting||!SydFSCHelper.shouldResetBotGreeting||(CIB.config.greeting.shouldSendBotGreeting=!0)})}return(yt&&sj_evt.bind("ajax.load",function(){_G[SydFSCHelper.SYD_MODE]="serp"}),uo=SydFSCHelper.getConfigOrDefault((df=_w._sydConvConfig)===null||df===void 0?void 0:df.disResetTT,!1),uo&&(ye=(ne=(gf=e===null||e===void 0?void 0:e.shadowRoot)===null||gf===void 0?void 0:gf.querySelector("cib-action-bar"))===null||ne===void 0?void 0:ne.shadowRoot,ye&&(se=sj_ce("style"),se.textContent="\n                    cib-tooltip {\n                        display: none !important;\n                    }\n                ",ye.appendChild(se))),!(er&&"SydneyTestHelper"in _w))?[3,2]:[4,SydneyTestHelper===null||SydneyTestHelper===void 0?void 0:SydneyTestHelper.setTestMocks()];case 1:ho.sent();ho.label=2;case 2:hi&&(fo=new URLSearchParams(_w.location.search),pe=fo.get("convid"),pe&&uf(pe));ee=(te=_d.querySelector("cib-serp"))===null||te===void 0?void 0:te.shadowRoot;he=ee===null||ee===void 0?void 0:ee.querySelector("cib-conversation");he&&he.shadowRoot&&(l=he.shadowRoot.querySelector(".scroller"),se=sj_ce("style"),ke&&(se.textContent="\n                cib-notification-container {\n                    display: none;\n                }\n            "),he.shadowRoot.appendChild(se));ge&&(we=(re=(ie=ee===null||ee===void 0?void 0:ee.querySelector("cib-action-bar"))===null||ie===void 0?void 0:ie.shadowRoot)===null||re===void 0?void 0:re.querySelector(".autosuggest-text"),we&&(we.style.display="none"));be="ontouchstart"in window||!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0;ct&&Log.Log("ClientInst","Codex","TabletScrollDisabled");be&&Log.Log("ClientInst","Codex","TouchD");lt&&Log.Log("ClientInst","Codex","TouchDesktopScrollDisabled");h||ct||be&&lt||(sj_be(_w,"mousewheel",bu),sj_be(_w,"touchstart",ku),sj_be(_w,"touchmove",du),sj_be(_w,"touchend",gu),Log.Log("ClientInst","Codex","BindedScrollEvents"),yi&&(ce=(ue=_d.querySelector("cib-serp"))===null||ue===void 0?void 0:ue.shadowRoot.querySelector("cib-side-panel"),ce&&sj_be(ce,"mouseenter",pu),ce&&sj_be(ce,"mouseleave",wu)));SydFSCHelper.triggerShareFlow();hr();sj_evt.bind("ajax.load",hr);o&&(SydFSCHelper.setupHistory(),SydFSCHelper.checkInitialState());uu();h&&tf();SydFSCHelper.triggerClarity();CIB.onResetConversation(function(){SydFSCHelper.shouldMove1TAnswers(d,a)&&lr()});CIB.onModeChanged(function(n){sj_evt.fire("onModeChanged",n)});if(CIB.onMobileUpsellPopupShown)CIB.onMobileUpsellPopupShown(function(){var n={convId:CIB.manager.conversation.id,responseTone:CIB.responseTone};SydFSCHelper.SydLog("SystemEvent","MobileUpsell","MobileUpsellPopupShown",n);SydFSCHelper.createRequest("sydchat/writeConvInfo",JSON.stringify(n))});return eo=((fe=_w.BingChatCustomGreetingString)===null||fe===void 0?void 0:fe.length)>0,pi&&!eo&&SydFSCHelper.processCachedResponseUsingCIB(JSON.parse(wi)),di&&SydFSCHelper.updateChatBackgroundWidth(),gi&&SydFSCHelper.hideSignInUpsellFor3P(),[2]}})})}function ru(){var n=_ge("b_content");sb_st(function(){n&&Lib.CssClass.contains(n,"b_showconv")&&Lib.CssClass.remove(n,"b_showconv")},0)}function hr(){sj_evt.bind("hideSydFSC",function(n){var v,i,r,y,k,f,e,t,l,b;if(!ot){if(ot=!0,Log.Log("ClientInst","Codex","LeaveConversationMode"),s||Lib.CssClass.remove(sj_b,c),g&&sb_st(function(){if(!Lib.CssClass.contains(sj_b,c)){var n=_ge("b_header"),t=_d.querySelector(".b_scopebar");t&&(n===null||n===void 0?void 0:n.insertBefore(t,ui))}},1e3),v=_ge("sb_form"),v&&Lib.CssClass.contains(v,"hassbi")&&Lib.CssClass.remove(v,"hassbi"),CIB.hideConversation(),s||h||(Lib.CssClass.add(_d.documentElement,"b_delayOvflw"),SydFSCHelper.shouldMove1TAnswers(d,a)&&lr(),i=_ge("b-scopeListItem-web"),i&&i.children.length>0&&(i.children[0].setAttribute("aria-current","page"),Lib.CssClass.add(i,"b_active"),_ge("b_skip_to_content").setAttribute("tabindex","0")),r=_ge("b-scopeListItem-conv"),r&&r.children.length>0&&(r.children[0].setAttribute("aria-current","false"),Lib.CssClass.remove(r,"b_active")),y=_ge("b_phead_chat"),y&&Lib.CssClass.contains(y,"b_active")&&Lib.CssClass.remove(y,"b_active")),_G[SydFSCHelper.SYD_PREV_MODE]!=_G[SydFSCHelper.SYD_MODE]&&(_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE],o&&(k=n&&n.length>1?n[1]:!1,k&&SydFSCHelper.LogIntEvent("ConversationViewExit","Conversation",{source:"BackButton"}),k||SydFSCHelper.pushSydHistory(!1))),!o&&ut&&SydFSCHelper.updateConvFlagInURL(!1),SydFSCHelper.updateConvPageTitle(!1),_G[SydFSCHelper.SYD_MODE]="serp",st){if(f=_ge("b_pole"),!f){for(f=sj_ce("div","b_pole"),e=_d.querySelector("main"),t=_ge("b_results");t&&e&&t.parentElement!=e;)t=t.parentElement;e&&t&&e.insertBefore(f,t)}SydFSCHelper.addCarousel(f)}else if(ei&&(l=CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text!="Generating answers for you..."||n.type==="text"&&n.author==="user"}),l&&l.length>0)){var p=l[l.length-1].text.split("`"),w=p.length==1?p[0]:p.length==3?p[1]:"",nt=_ge("sb_form_go"),tt=_ge("sb_form_q");_w.sj_isAjax&&w&&tt.value.toLowerCase()!=w.toLowerCase()&&nt&&(tt.value=w,SydFSCHelper.lastQuery=w,nt.click())}u&&sj_evt.fire("switchToWeb");sj_ue(_w,"beforeprint",ar);sj_ue(_w,"afterprint",vr);b=_ge("b_content");b&&Lib.CssClass.contains(b,"b_hide")&&Lib.CssClass.remove(b,"b_hide");ot=!1}});sb_st(function(){or||(sj_evt.bind("showSydFSC",vu,!0),u&&sj_evt.bind("showNotebook",function(){sj_evt.fire("switchToNotebook");pt=__spreadArray([],CIB.config.sydney.request.optionsSets,!0);var n=SydFSCHelper.getAllowedToneOptionsSets(SydFSCHelper.CREATIVE_TONE);n=n.filter(function(n){return n!=="autosave"});rr.forEach(function(t){SydFSCHelper.addOptionSet(n,t)});CIB.config.sydney.request.optionsSets=n;CIB.config.messaging.maxMessageLength=fr;CIB.showNotebook&&CIB.showNotebook();console.debug("CIB change to notebook mode");_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE];_G[SydFSCHelper.SYD_MODE]="notebook"},!0))},0);nr&&sj_evt.bind("sydFSCLoaded",ru,!0);sj_evt.bind("onModeChanged",function(n){setTimeout(function(){if(u&&_G[SydFSCHelper.SYD_PREV_MODE]==="notebook"&&n[1]!=="notebook"){CIB.config.sydney.request.optionsSets=__spreadArray([],pt,!0);var t=SydFSCHelper.getAllowedToneOptionsSets(CIB.responseTone);CIB.config.sydney.request.optionsSets=t;CIB.config.messaging.maxMessageLength=ur}},0)});sj_evt.fire("convInit:done")}function cr(){var t;f=((t=_d.getElementsByClassName("b_top"))===null||t===void 0?void 0:t.length)>0?_d.getElementsByClassName("b_top")[0]:null;ni=sj_b.querySelector("#b_sydTigerCont")!=null;ft=!!f&&f.querySelector("#sydwrap_wrapper")!=null;n.moveOnlySydXAnswers&&(i=sj_b.querySelector("#sydwrap_wrapper #b_syd_sm_chat .b_wpt_chat"),i&&(Lib.CssClass.add(i,ri),li=i.querySelector(".b_wpt_creator_content")!=null))}function uu(){var n=_ge("id_hbfo");sj_be(n,"click",function(n){var r=n.target,t,i;_G[SydFSCHelper.SYD_MODE]=="conversation"&&r&&(t=fu(r),t&&t.target!="_blank"&&(i="",t.href.indexOf("/profile/")>=0?i="profile":t.href.indexOf("/account/")>=0&&(i="account"),SydFSCHelper.LogIntEvent("ConversationViewExit","Conversation",{source:"ClickMenu",target:i})))})}function fu(n){while(n!=null){if(n.tagName=="A"&&Lib.CssClass.contains(n,"hb_section"))return n;n=n.parentElement}return null}function bt(n,t,i){i===void 0&&(i=!1);t&&n&&(i?n.prepend(t):n.appendChild(t))}function eu(n){var u,f,e,o,s,h;if(!kt){bt(_ge("b_sydtoporpole"),n);return}var l=_d.querySelector("cib-serp"),i=(f=(u=_d.querySelector("cib-serp"))===null||u===void 0?void 0:u.shadowRoot)===null||f===void 0?void 0:f.querySelector("cib-conversation"),r=(o=(e=i===null||i===void 0?void 0:i.shadowRoot)===null||e===void 0?void 0:e.querySelector(".scroller"))===null||o===void 0?void 0:o.querySelector(".main cib-welcome-container"),c=(h=(s=i===null||i===void 0?void 0:i.shadowRoot)===null||s===void 0?void 0:s.querySelector(".scroller"))===null||h===void 0?void 0:h.querySelector(".main");i===null||i===void 0?void 0:i.appendChild(p);r?r===null||r===void 0?void 0:r.after(w):c===null||c===void 0?void 0:c.prepend(w);t===null||t===void 0?void 0:t.appendChild(n);gt;bt(l,t);ou()}function ou(){su();hu()}function su(){var t=_d.querySelector("#sydFirstAnswer .b_wpt_chat"),n=_d.querySelector("#sydFirstAnswer .b_wpt_chat .b_wpt_chat_inner");t&&n&&(t.querySelector("b_wpt_chat_inner > .b_sideBleed")&&(n.style.padding="0 20px 5px 20px"),t.querySelector(".b_wpt_chat_inner > .wtr_core.b_sideBleed, .b_wpt_chat_inner > .b_sideBleed #lMapContainer, .b_wpt_chat_inner > .ji_container, .b_wpt_chat_inner > .b_sideBleed #placeAnswer, .b_wpt_chat_inner > .b_sideBleed .ckt_main, .b_wpt_chat_inner > .b_sideBleed .mit_ans, .b_wpt_chat_inner > .jobsAnswerContainer, .b_wpt_chat_inner > div .sa_main")&&(n.style.padding="unset"),n.querySelector(".b_wpt_creator")&&(n.style.padding="0px"),n.querySelector(".b_wpt_insights")&&(n.style.paddingTop="0px",n.style.paddingBottom="0px"))}function hu(){var n=_d.querySelector("#sydFirstAnswer .b_wpt_chat");n&&n.querySelector(".b_wpt_creator")&&(n.style.boxShadow="unset")}function cu(){if(cr(),n.moveOnlySydXAnswers){if(!i||ai&&li)return;(a||ft&&!ni)&&sb_st(function(){eu(i)},nu)}}function lr(){if(n.moveOnlySydXAnswers){if(!i)return;var t=sj_b.querySelector("#sydwrap_wrapper #b_syd_sm_chat");t&&!t.contains(i)&&i&&(Lib.CssClass.remove(i,ri),bt(t,i,!0))}}function lu(){var n=new URLSearchParams(_w.location.search),t=n.get("sendquery");return t==="1"}function au(){var n=_ge("conv-css-link");n&&!n.classList.contains("css-conv-added")&&(n.setAttribute("rel","stylesheet"),n.setAttribute("class","css-conv-added"))}function vu(n){var w,b,k,tt,it,t,rt,ct,f,v,e,r,i,l,ht;if(!et){et=!0;SydFSCHelper.updateResponseToneAfterSerp();CIB.config.features.enableAds=!0;ci&&(it=CIB.config.sydney.request.optionsSets.indexOf("nocacheread"),it>=0&&CIB.config.sydney.request.optionsSets.splice(it,1));bi&&au();t=_ge("b_header");rt=!1;t&&nt&&Lib.CssClass.contains(t,nt)&&(Lib.CssClass.remove(t,nt),SydFSCHelper.LogIntEvent("ConversationViewEnter","Scope",{source:"ShowConv"}),u&&(ct=new URLSearchParams(window.location.search),rt=ct.get("showntbk")==="1"));t&&!Lib.CssClass.contains(t,"b_bcbSwitch")&&tr&&Lib.CssClass.add(t,"b_bcbSwitch");st&&SydFSCHelper.removeQueries();f=n&&n.length>1?n[1]:null;v=n&&n.length>2?n[2]:null;a=n&&n.length>3?n[3]==gr:!1;var ft=n&&n.length>5?n[5]:null,vt=n&&n.length>6?n[6]:!1,y=n&&n.length>7?n[7]:!1,yt=n&&n.length>8?n[8]:!1;if(s||h||(_w.scrollY>0&&_w.scrollTo(0,0),_d.documentElement&&(Lib.CssClass.add(_d.documentElement,"b_disOvflw"),Lib.CssClass.remove(_d.documentElement,"b_delayOvflw"))),s||(Lib.CssClass.add(sj_b,c),g&&sb_st(function(){if(Lib.CssClass.contains(sj_b,c)){var t=_ge("b_header"),i=_ge("id_h"),n=_d.querySelector(".b_scopebar");ui=n&&n.nextSibling;i&&n&&(t===null||t===void 0?void 0:t.insertBefore(n,i))}},1e3)),SydFSCHelper.shouldMove1TAnswers(d,a,f)&&cu(),f&&SydFSCHelper.sendFirstQuery(yt?f.trim():f.toLowerCase().trim(),v,ft,y||lu()),CIB.showConversation(),vt&&(e=[],ft&&e.push({author:"user",text:ft}),v&&e.push({author:"bot",text:v}),dt&&e.length!=0&&CIB.registerContext(e),CIB.toggleSpeechEnabled(),CIB.triggerMic()),!s&&!h){r=_ge("b-scopeListItem-web");r&&r.children.length>0&&r.parentElement&&(r.children[0].setAttribute("aria-current","false"),Lib.CssClass.remove(r,"b_active"));var p=_ge("b-scopeListItem-conv"),ot=_ge("b_bceBcbToggle"),lt=ot===null||ot===void 0?void 0:ot.querySelector(".selected");if(p&&p.children.length>0&&(p.children[0].setAttribute("aria-current","page"),Lib.CssClass.add(p,"b_active"),_ge("b_skip_to_content").setAttribute("tabindex","-1"),lt&&y&&lt.focus()),i=_d.querySelector(".b_sydConvMode"),l=(tt=(k=(b=(w=i===null||i===void 0?void 0:i.querySelector("cib-serp"))===null||w===void 0?void 0:w.shadowRoot)===null||b===void 0?void 0:b.querySelector("cib-action-bar"))===null||k===void 0?void 0:k.shadowRoot)===null||tt===void 0?void 0:tt.querySelector(".input-container .text-input textarea"),l&&!y&&l.focus(),i&&l&&y){sj_be(i,"keyup",at);function at(n){(n.code=="Tab"||n.keyCode==9||n.key=="Tab")&&l.focus();i.removeEventListener("keyup",at)}}}_G[SydFSCHelper.SYD_PREV_MODE]!=_G[SydFSCHelper.SYD_MODE]&&(_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE],o&&(ht=n&&n.length>4?n[4]:!1,ht&&SydFSCHelper.LogIntEvent("ConversationViewEnter","Conversation",{source:"BackButton"}),ht||SydFSCHelper.pushSydHistory(!0)));!o&&ut&&SydFSCHelper.updateConvFlagInURL(!0);SydFSCHelper.updateConvPageTitle(!0);ki||yu();_G[SydFSCHelper.SYD_MODE]="conversation";rt&&sj_evt.fire("switchToNotebook");sj_be(_w,"beforeprint",ar);sj_be(_w,"afterprint",vr);et=!1}}function yu(){var n=ClientObserver.getBrowserWidth(),t=ClientObserver.getBrowserHeight();SydFSCHelper.set2TQueryConfigs(n,t,vi)}function pu(){vt=!0}function wu(){vt=!1}function bu(n){var t=0;n||(n=window.event);n.wheelDelta?t=n.wheelDelta/60:n.detail&&(t=-n.detail/2);yr(t,tt)}function ku(n){ht=n.changedTouches[0].clientY;y=n.touches&&n.touches.length>1?!0:!1}function du(n){var t=n.changedTouches[0].clientY-ht;yr(t,br,!0)}function gu(n){r=0;b=!1;k=!1;ht=0;y=n.touches&&n.touches.length!==0}function ar(){var n=_ge("b_content");n&&Lib.CssClass.add(_ge("b_content"),"b_hide")}function vr(){var n=_ge("b_content");n&&Lib.CssClass.remove(n,"b_hide")}function yr(n,t,i){var e,f,o;(i===void 0&&(i=!1),Log.Log("ClientInst","Codex","CheckScrollCalled"),vt)||(sb_ct(fi),b||(v=Lib.CssClass.contains(sj_b,c),k=v?nf():_w.scrollY==0),b=!0,k&&(r+=n),i||(fi=sb_st(function(){r=0;b=!1;k=!1},150)),e=!v&&r>it&&_G[SydFSCHelper.SYD_MODE]!="conversation"&&!y,f=rt&&v&&r<-1*it&&_G[SydFSCHelper.SYD_MODE]=="conversation"&&!y,u&&!f&&(f=rt&&v&&r<-1*it&&_G[SydFSCHelper.SYD_MODE]=="notebook"&&!y),e?(Log.Log("ClientInst","Codex","ScrollToChat"),!at&&r>t&&(SydFSCHelper.LogIntEvent("ConversationViewEnter","Scope",{source:"ScrollUp"}),SydFSCHelper.triggerSydFSCQueryWithContext())):f&&(Log.Log("ClientInst","Codex","ScrollOutChat"),o=u&&_G[SydFSCHelper.SYD_MODE]==="notebook",!at&&!o&&r<-1*t&&(SydFSCHelper.LogIntEvent("ConversationViewExit","Scope",{source:"ScrollDown",target:_G[SydFSCHelper.SYD_PREV_MODE]}),sj_evt.fire("hideSydFSC"),sb_st(function(){_w.scrollTo(0,0)},1))))}function nf(){return!l?!1:Math.abs(l.scrollTop-(l.scrollHeight-l.offsetHeight))<1}function tf(){var t,i,r,e=_ge("b_sydOvrClose"),n,u,f;e&&sj_be(e,"click",function(){sj_evt.fire("hideSydFSC")});n=(r=(i=(t=_d.querySelector("#b_sydConvCont cib-serp"))===null||t===void 0?void 0:t.shadowRoot)===null||i===void 0?void 0:i.querySelector("cib-action-bar"))===null||r===void 0?void 0:r.shadowRoot;u=n===null||n===void 0?void 0:n.querySelector(".outside-left-container");u&&(u.style.display="none");oi&&n&&(f=sj_ce("style"),f.textContent="\n                .control.microphone {\n                    display: none;\n                }\n            ",n.appendChild(f))}function rf(n,t){var i,r;n===void 0&&(n=null);t===void 0&&(t=tt);r=(i=_w._sydPayWallConfig)===null||i===void 0?void 0:i.loadSydneyConvResWithPayWall;r?sj_evt.bind("waitlistUpdate:eligible",sr,!0):void sr(n);tt=t}function uf(n){CIB.loadConversation(n);SydFSCHelper.lastQuery=SydFSCHelper.getQuery().toLowerCase().trim()}var c="b_sydConvMode",nt="b_sydShowConv",pr="b_sydConvCont",wr="b_ctf",tt=10,it=10,br=100,kr=2e3,dr=2e3,kt,rt,dt,o,ut,gt=!1,f,ft,i=null,ni=!1,e,ti,ii,l,t,p,w,gr="SYDX_WRAPPER",a=!1,ri="b_sydxwrappedanswer",nu=1e3,et=!1,ot=!1,ui=null,r=0,fi,b=!1,k=!1,v=!1,tu=!1,d=!1,ei=!1,st=!1,s=!1,h=!1,ht;n.moveOnlySydXAnswers=!1;var oi=!1,si=!1,hi=!1,iu=!1,ci=!1,li=!1,ai=!1,vi=!1,ct=!1,lt=!1,at=!1,yi=!1,vt=!1,yt=!1,pi=!1,wi="",y=!1,bi,ki=!1,di=!1,gi=!1,nr=!1,tr=!1,u=!1,pt,ir="",rr=[],ur,fr,er=!1,g=!1,or=!1,wt="";(typeof sj_b=="undefined"||sj_b==null)&&(window.sj_b=document.body);n.init1TAnswerContents=cr;n.initWithWaitlistUpdate=rf;sj_evt.fire("sydFSC.init")})(SydneyFullScreenConv||(SydneyFullScreenConv={}))